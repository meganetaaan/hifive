/* Copyright (C) 2012-2015 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 0.0.1 gitCommitId b238dad43561cef1f12773b192564f67541506bb (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var sa,Ha,ta,qa;function l(a,e,h){var j=null,l=xa[a],m=zb[a];m&&(j=m(a,l,e,h));!j&&l&&(j=g.u.str.format.apply(null,[l].concat(e)));j&&(j+="(code="+a+")");e=j?Error(j):Error("FwError: code = "+a);a&&(e.code=a);h&&(e.detail=h);throw e;}function Ab(a){for(var e in a)a.hasOwnProperty(e)&&(xa[e]=a[e])}function ca(a,e,h){var j=null,l=xa[a];l&&(e=[l].concat(e),j=g.u.str.format.apply(null,e));return{code:a,message:j,detail:h}}function J(a){return null==a?a:E(a)?a:[a]}function w(a){return"string"===
typeof a}function ya(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function va(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function wa(a){return!w(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function Ia(c){if("regexp"===a.type(c))return c;var e="",e=-1!==c.indexOf("*")?a.map(c.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+e+"$")}function za(a,e,h){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(e,h):a[e](h))}function ea(c,e,h,j){return c[a.hasOwnProperty("curCSS")?
"pipe":"then"](e,h,j)}function ub(a){return a&&a.document&&a.document.nodeType===nb&&ka(a.document)===a}function K(a){return typeof a.nodeType===oa?ub(a)?a.document:null:a.nodeType===nb?a:a.ownerDocument}function ka(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ja(c,e,h,j){function l(b){return function(){if(!y._rejected){var k=g.u.obj.argsToArray(arguments),d=a.inArray(b,c);B[d]=2>k.length?k[0]:k;++y._resolveCount===y._promisesLength&&y._doneCallbackExecuter()}}}var m=
c?c.length:0,s=g.async.isPromise,y=this,B=null;this._doneCallbackExecuter=function(){y._resolved=!0;e&&(B?e.call(this,B):e.apply(this,arguments))};this._failCallbackExecuter=function(){y._rejected=!0;h?h.apply(this,arguments):j&&g.settings.commonFailHandler&&g.settings.commonFailHandler.call(this,arguments)};if(1===m||s(c)){var A=1===m?c[0]:c;s(A)?(this.remove=function(a){!this._resolved&&!this._rejected&&A===a&&this._doneCallbackExecuter()},A.done(this._doneCallbackExecuter),A.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var m=[],q=0,k=c.length;q<k;q++){var b=c[q];s(b)&&m.push(b)}s=m.length;if(0===s)this._resolved=!0,e&&e();else{this._promises=m;B=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=s;for(q=0;q<s;q++)k=m[q],k.done(l(k)).fail(this._failCallbackExecuter)}}}function Z(a,e,h,j){return new Ja(a,e,h,j)}var vb=void 0;if(window.h5){if(window.h5.env&&"0.0.1"===window.h5.env.version)return;vb=window.h5}var g={};window.h5=g;g.coexist=function(){window.h5=vb;
return g};g.env={version:"0.0.1"};var xa={},zb={},wb=12029,oa="undefined",ma=1,nb=9,aa=function(){var a=null,e=null,h=null;return function(j){a||(a=document.createElement("a"));null===h&&(a.setAttribute("href","./"),h="./"!==a.href);if(h)return a.setAttribute("href",j),a.href;e||(e=document.createElement("span"));e.innerHTML='<a href="'+j+'" />';return e.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(c,e,h){if(!c||!w(c))return null;"boolean"===typeof e&&(h=e,e=!1);e=e||document;c=
a("<div>"+c+"</div>",e);h||c.find("script").remove();for(var h=c[0].childNodes,e=e.createDocumentFragment(),c=0,j=h.length;c<j;c++)e.appendChild(h[c]);return e.childNodes};var E=Array.isArray||function(){var a=Object.prototype.toString;return function(e){return"[object Array]"===a.call(e)}}(),G=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(e){return"[object Function]"===a.call(e)}}return function(a){return"function"===typeof a}}();Ja.prototype=a.extend(Ja.prototype,
{remove:function(c){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var e=a.inArray(c,this._promises);-1!==e&&(this._promises.splice(e,1),this._resolveArgs.splice(e,1),va(c)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});sa={controllerInternal:null};qa=ta=Ha=void 0;(function(){function c(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";
case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case q:return"u";case "undefElem":return"_";case "objElem":return"@"}}function e(a,b){if(w(a)){var f=a;b&&(f=f.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return f=f.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,
"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(e(a.toString())):a}function h(a,b){return"1"===b?a:w(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(h(a.toString())):a}function j(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function C(a,b,f){var d=g.async.deferred();g.ajax({url:a,async:b,cache:f,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
B(arguments);a.push(this.url);d.notifyWith(d,a);d.resolveWith(d,a)}).fail(function(){d.rejectWith(d,B(arguments))});return d.promise()}function m(a){w(a)||l(k,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,f=0;f<b;f++)wa(a[f])||l(k,"h5.u.obj.ns()");for(var d=window,f=0;f<b;f++){var c=a[f];typeof d[c]===q&&(d[c]={});d=d[c]}return d}function s(a,f){var d=m(a),k;for(k in f)f.hasOwnProperty(k)&&(void 0!==d[k]&&l(b,[a,k]),d[k]=f[k])}function y(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function B(a){return Array.prototype.slice.call(a)}
function A(a,b){w(a)||l(k,"h5.u.obj.getByPath()");var a=a.replace(/\[(\d+)\]/g,function(a,b,f){return f?"."+b:b}),f=a.split("."),d=0;if("window"===f[0]&&(!b||b===window))d=1;for(var c=b||window,p=f.length;d<p&&!(c=c[f[d]],null==c);d++);return c}var q="undefined",k=11E3,b=11001,p=11004,r=11005,d=11006,f={},o={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},u=void 0!==document.createElement("script").onload,I=-1===/\r\n/.toString().indexOf("\r\n");s("h5.u",{loadScript:function(b,d){var k=
g.async.deferred,c=J(b);(!c||0===c.length)&&l(11007);for(var p=0,e=c.length;p<e;p++)b=c[p],(!w(b)||!a.trim(b))&&l(11007);null!=d&&!a.isPlainObject(d)&&l(11008,"h5.u.loadScript()");var q=d&&!1===d.async?!1:!0,r=!!(d&&!0===d.force),p=!!(d&&!0===d.parallel),h=!!(d&&!0===d.atomic),j=!r,o=q?k():null,m=q?function(a){o.reject(ca(11010,[a]))}:null,e=q?function(){var a=k();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,s=p?[]:null,y=[],I={};if(q){if(!h&&u){var A=a("head"),H=function(a){var b=
k(),d=document.createElement("script");d.onload=function(){d.onload=null;f[a]=a;b.resolve()};d.onerror=function(){d.onerror=null;b.reject(a)};d.type="text/javascript";d.src=j?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;A[0].appendChild(d);return b.promise()};if(p)s.push(e()),a.each(c,function(){var a=aa(this.toString());if(!r&&a in f)return!0;s.push(H(a))}),Z(s,function(){o.resolve()},m);else{var L=ea(k().resolve(),e);a.each(c,function(){var a=aa(this.toString());L=ea(L,function(){if(r||!(a in f))return H(a)},
m)});ea(L,function(){o.resolve()},m)}}else if(p){var M=[];s.push(e());M.push(null);a.each(c,function(){var a=aa(this.toString());if(!r&&(a in f||a in I))return!0;s.push(C(a,q,j));h?I[a]=a:M.push(null)});p=c=null;h?(c=function(){a.each(B(arguments),function(b,d){a.globalEval(d[0])});a.extend(f,I);o.resolve()},p=a.noop):(c=function(){o.resolve()},p=function(){for(var b=B(arguments),d=0;d<M.length;d++)if(b[d]){var f=b[d][3];M[d]!==f&&(a.globalEval(b[d][0]),M.splice(d,1,f))}});g.async.when(s).done(c).fail(m).progress(p)}else L=
ea(k().resolve(),e),a.each(c,function(){var b=aa(this.toString());L=ea(L,function(){var d=k();!r&&(b in f||b in I)?d.resolve():C(b,q,j).done(function(k){h?(y.push(k),I[b]=b):(a.globalEval(k),f[b]=b);d.resolve()}).fail(function(){d.reject(this.url)});return d.promise()},m)}),ea(L,function(){h&&(a.each(y,function(b,d){a.globalEval(d)}),a.extend(f,I));o.resolve()},m);return o.promise()}a.each(c,function(){var b=aa(this.toString());if(!r&&(b in f||b in I))return!0;C(b,q,j).done(function(d){h?(y.push(d),
I[b]=b):(a.globalEval(d),f[b]=b)}).fail(function(){l(11010,[b])})});h&&(a.each(y,function(b,d){a.globalEval(d)}),a.extend(f,I))},createInterceptor:function(a,b){return function(d){var f={},k=a?a.call(this,d,f):d.proceed();d.result=k;if(!b)return k;if(k&&G(k.promise)&&!y(k)){var c=this;za(k,"always",function(){b.call(c,d,f)});return k}b.call(this,d,f);return k}}});s("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===
d},format:function(a,b){if(null==a)return"";var d=B(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,b){if(/^\d+$/.test(b)){var f=d[parseInt(b,10)];return typeof f===q?q:f}f=/^\d+[\.|\[]/.test(b)?b:"0."+b;f=A(f,d);return typeof f===q?q:f})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return o[a]})}});s("h5.u.obj",{expose:s,ns:m,serialize:function(b){function d(a){for(var b=0,f=p.length;b<f;b++)if(a===p[b])return!0;return!1}function f(a){for(var b=
0,d=p.length;b<d;b++)a===p[b]&&p.splice(b,1)}function k(b){var h=b,g=a.type(b);"object"===typeof b&&(b instanceof String?g="String":b instanceof Number?g="Number":b instanceof Boolean&&(g="Boolean"));switch(g){case "String":case "string":h=c(g)+e(h);break;case "Boolean":h=h.valueOf();case "boolean":h=c(g)+(h?1:0);break;case "Number":h=h.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))h=Infinity===b.valueOf()?c("infinity"):-Infinity===b.valueOf()?c("-infinity"):c("nan");h=c(g)+h;break;
case "number":h=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?c("infinity"):-Infinity===b?c("-infinity"):c("nan"):c(g)+h;break;case "regexp":h=c(g)+e(h.toString(),I);break;case "date":h=c(g)+ +h;break;case "array":d(b)&&l(ERR_CODE_REFERENCE_CYCLE);p.push(b);for(var o=[],h=c(g)+"[",g=0,m=b.length;g<m;g++){o[g.toString()]=!0;var s;s=b.hasOwnProperty(g)?"function"===a.type(b[g])?c(q):j(k(b[g])):c("undefElem");h+='"'+s+'"';g!==b.length-1&&(h+=",")}var g="",u;for(u in b)o[u]||"function"!==
a.type(b[u])&&(g+='"'+j(e(u))+'":"'+j(k(b[u]))+'",');g&&(h+=(b.length?",":"")+'"'+c("objElem")+"{"+j(g),h=h.replace(/,$/,""),h+='}"');h+="]";f(b);break;case "object":d(b)&&l(r);p.push(b);h=c(g)+"{";for(u in b)b.hasOwnProperty(u)&&"function"!==a.type(b[u])&&(h+='"'+j(e(u))+'":"'+j(k(b[u]))+'",');h=h.replace(/,$/,"");h+="}";f(b);break;case "null":case q:h=c(g)}return h}G(b)&&l(11002);var p=[];return"2|"+k(b)},deserialize:function(b){function f(b){function e(a){switch(a){case "s":return"string";case "n":return"number";
case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return q;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;j=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(e(b)){case "String":j=new String(h(j,k));break;case "string":break;
case "Boolean":"0"===j||"1"===j?j=new Boolean("1"===j):l(d);break;case "boolean":"0"===j||"1"===j?j="1"===j:l(d);break;case "nan":""!==j&&l(d);j=NaN;break;case "infinity":""!==j&&l(d);j=Infinity;break;case "-infinity":""!==j&&l(d);j=-Infinity;break;case "Number":"infinity"===e(j)?j=new Number(Infinity):"-infinity"===e(j)?j=new Number(-Infinity):"nan"===e(j)?j=new Number(NaN):(j=new Number(j),isNaN(j.valueOf())&&l(d));break;case "number":j=(new Number(j)).valueOf();isNaN(j)&&l(d);break;case "array":var g;
try{g=a.parseJSON(j)}catch(r){l(d)}E(g)||l(d);for(var j=[],o=0,m=g.length;o<m;o++)switch(e(g[o].substring(0,1))){case "undefElem":j[o]=void 0;delete j[o];break;case "objElem":var b=f(c("object")+g[o].substring(1)),u;for(u in b)j[h(u)]=b[u];break;default:j[o]=f(g[o])}break;case "object":try{g=a.parseJSON(j)}catch(s){l(d)}a.isPlainObject(g)||l(d);j={};for(u in g)b=f(g[u]),j[h(u)]=b;break;case "date":j=new Date(parseInt(j,10));break;case "regexp":try{o=j.match(/^\/(.*)\/(.*)$/),m=h(o[1],k),j=RegExp(m,
o[2])}catch(I){l(d)}break;case "null":""!==j&&l(d);j=null;break;case q:""!==j&&l(d);j=void 0;break;default:l(p)}return h(j,k)}w(b)||l(11009);b.match(/^(.)\|(.*)/);var k=RegExp.$1;"1"!==k&&"2"!==k&&l(11003,[k,"2"]);return f(RegExp.$2)},isJQueryObject:y,argsToArray:B,getByPath:A})})();(function(){function c(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var e=!1;a.isDefaultPrevented=function(){return e};a.preventDefault=function(){e=true}}if(!a.isImmediatePropagationStopped){var h=
!1;a.isImmediatePropagationStopped=function(){return h};a.stopImmediatePropagation=function(){h=true}}}function e(a){var c={},e;for(e in a){var h=a[e];if(a.hasOwnProperty(e)&&(G(h)||null===h||"string"===typeof h||"number"===typeof h||"boolean"===typeof h))c[e]=h}this._mix=function(a){for(var e in c)a[e]=c[e]};this._hasInterface=function(a){for(var e in c)if(!g.u.str.startsWith(e,"_")&&typeof a[e]===oa)return!1;return!0}}function h(a){return new e(a)}a.extend(e.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});g.u.obj.expose("h5.mixin",{createMixin:h,eventDispatcher:h({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;for(var h=0,g=e.length;h<g;h++)if(e[h]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!w(a))&&l(16E3);null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],h=0,g=e.length;h<g;h++)if(e[h]===c){e.splice(h,1);break}},dispatchEvent:function(a){if(this._eventListeners){var e=this._eventListeners[a.type];if(e){e=e.slice(0);c(a,this);for(var h=0,g=e.length;h<g&&!a.isImmediatePropagationStopped();h++)G(e[h])?e[h].call(a.target,a):e[h].handleEvent&&e[h].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var c,e,h,j,C,m,s;function y(a){return a.match(/^error$/i)?c:a.match(/^warn$/i)?e:a.match(/^info$/i)?h:a.match(/^debug$/i)?j:a.match(/^trace$/i)?C:a.match(/^all$/i)?m:a.match(/^none$/i)?s:null}function B(a,b){var d={},f=a.slice(0,b),k=Math.min(I,b),c=f.slice(0,k).join(" <- ");f.length>k&&(c+=" ...");d.preview=c;d.all=f.join("\n");return d}function A(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function q(b){for(var b=g.u.obj.argsToArray(b),
d=[],f=0,k=b.length;f<k;f++)d.push(a.type(b[f]));return d.join(", ")}function k(){}function b(b){(!w(b)||0===a.trim(b).length)&&l(d);this.category=a.trim(b)}var p=10003,r=10004,d=10005,f=10007,o=10008,u=10010,I=3;c=50;e=40;h=30;j=20;C=10;m=0;s=-1;var F=null;k.prototype={init:function(){},log:function(a){window.console&&(w(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,d=null,d=1===b.length?b[0]:g.u.str.format.apply(g.u.str,b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==c&&console.error?(console.error(b),d=!0):a==e&&console.warn?(console.warn(b),d=!0):a==h&&console.info?(console.info(b),d=!0):a==j&&console.debug&&(console.debug(b),d=!0);!d&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==c&&console.error?this._output(console.error,b):a.level==e&&console.warn?this._output(console.warn,b):a.level==h&&console.info?this._output(console.info,b):a.level==j&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(d){}a(b)}};b.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(c,arguments,this.error)},warn:function(a){this._log(e,arguments,this.warn)},info:function(a){this._log(h,arguments,this.info)},debug:function(a){this._log(j,arguments,this.debug)},trace:function(a){this._log(C,arguments,this.trace)},_traceFunctionName:function(b){var d=[],f=Error();if(f=f.stack||f.stacktrace)var k=/_traceFunctionName/,d=f.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),c=null,e=null,d=a.map(d,function(b,d){if(0===b.length)return null==e?"":null;c=""===a.trim(b)?"{anonymous}":a.trim(b);null===e&&k.test(b)&&(e=d);return c}).slice(e+3);else for(var b=b.caller,f=0,h=this.maxStackSize;f<h;f++){var p=A(b),g=q(b.arguments),r;try{r=b.caller}catch(j){d.push("{unable to trace}");break}p?d.push("{"+p+"}("+g+")"):r?d.push("{anonymous}("+g+")"):d.push("{root}("+g+")");if(!r)break;b=r}return B(d,this.maxStackSize)},
_log:function(a,b,d){var b={level:a,args:g.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},f=F.out,k=F.defaultOut,d=[],c=!1;if(f)for(var f=J(f),e=0,h=f.length;e<h;e++){var p=f[e];if(p.compiledCategory.test(this.category)&&a>=p.compiledLevel&&0<=p.compiledLevel&&(d.push(p),!1!==p.terminate)){c=!0;break}}(!d.length||!c)&&d.push(k);e=0;for(f=d.length;e<f;e++){k=d[e];h=k.compiledLevel;k=k.compiledTargets;if(a<h||0>h)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!k||0===k.length)break;c=0;for(h=k.length;c<h;c++)k[c].log(b)}},_levelToString:function(a){if(a===c)return"ERROR";if(a===e)return"WARN";if(a===h)return"INFO";if(a===j)return"DEBUG";if(a===C)return"TRACE"}};g.u.obj.expose("h5.log",{createLogger:function(a){return new b(a)},configure:function(){function b(k,c,q){if(!q){var g=c.category;(!w(g)||0===a.trim(g).length)&&l(u);g=a.trim(g);c.compiledCategory=Ia(g);h.push(g)}q=null==c.level?y(q?d.level:e.level):w(c.level)?y(a.trim(c.level)):
c.level;"number"!==typeof q&&l(p,c.level);c.compiledLevel=q;q=[];g=c.targets;if(null!=g){var j=[];null==g||E(g)||w(g)&&a.trim(g).length||l(o);for(var g=J(g),m=0,H=g.length;m<H;m++){null==g[m]||w(g[m])&&a.trim(g[m]).length||l(o);var s=g[m];if(s){-1!==a.inArray(s,j)&&l(f,s);var I=k[s];I||l(r,s);j.push(s);q.push(I.compiledTarget)}}}c.compiledTargets=q}var d={level:"NONE",targets:null},c=a.extend(!0,{},g.settings.log),e=c.defaultOut;e||(e=d,c.defaultOut=e);var h=[],q=c.target;q||(q={},c.target=q);(function(b){a.isPlainObject(b)||
l(10009);for(var d in b){var f=b[d];a.type(f.type)!=="object"&&f.type!=="console"&&l(1E4);var c=null,c=f.type==="console"?new k:a.extend(true,{},f.type);c.init&&c.init(f);f.compiledTarget=c}b.console={type:"console",compiledTarget:new k}})(q);b(q,e,!0);var j=c.out;if(j)for(var j=J(j),m=0,s=j.length;m<s;m++)b(q,j[m]);F=c}})})();(function(){function c(c){g.settings.aspects=a.map(J(c),function(a){a.target&&(a.compiledTarget=Ia(a.target));a.pointCut&&(a.compiledPointCut=Ia(a.pointCut));return a})}g.u.obj.ns("h5.settings");
g.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===wb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var e=g.u.createInterceptor(function(a,
c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});g.u.obj.expose("h5.core.interceptor",{lapInterceptor:e,logInterceptor:e,errorInterceptor:function(a){var c=null;try{c=a.proceed()}catch(e){g.settings.commonFailHandler&&G(g.settings.commonFailHandler)&&g.settings.commonFailHandler.call(null,e)}return c}});
a(document).trigger("h5preinit");g.settings.aspects&&c(g.settings.aspects);g.log.configure()})();(function(){g.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=w(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function h(a,b){var d=w(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function g(a,b){var d=w(a,"[^;) ]*",b).split(":");return 1===d.length?"":d[d.length-1]}var l=!!c.match(/iPhone/i),m=!!c.match(/iPad/i),s=l||m,y=!!c.match(/android/i),B=!!c.match(/Windows Phone/i),
A=!!c.match(/Edge/),q=!!c.match(/MSIE/)||!!c.match(/Trident/),k=!!c.match(/Firefox/i),b=!A&&!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),p=!A&&!y&&!b&&!!c.match(/Safari/i),r=!A&&!!c.match(/Webkit/i),d=!!c.match(/Opera/i),f=y&&!!c.match(/Safari/i)&&!b,o=!(!l&&!B&&!(f&&c.match(/Mobile/)&&!c.match(/SC-01C/)||y&&b&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),u=!(!m&&!(f&&!c.match(/Mobile/)||y&&b&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),
I=!o&&!u,F=null,D=null,$=function(b,d){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(d))).split("_")},w=function(b,d,f){return a.trim(c.match(!1===f?RegExp(b+d):RegExp(b+d,"i")))};if(l)D=$("iPhone OS","like"),F=parseInt(D[0]),D=D.join(".");else if(m)D=$("CPU OS","like"),F=parseInt(D[0]),D=D.join(".");else if(!y||!k)y?(D=e("Android"),F=parseInt(D.split(".")[0])):B&&((D=e("Windows Phone OS"))||(D=e("Windows Phone")),F=parseInt(D.split(".")[0]));q&&d&&(q=!1);var Aa=$=null;if(s||y&&f)$=F,
Aa=D;else{var N=null;q?N=e("MSIE",!1)||g("rv"):b?(N=h("Chrome",!1))||(N=h("CrMo",!1)):p?N=h("Version"):k?N=h("Firefox"):d?((N=h("Version"))||(N=h("Opera")),N||(N=e("Opera"))):A&&(N=h("Edge"));N&&($=parseInt(N.split(".")[0]),Aa=N)}return{osVersion:F,osVersionFull:D,browserVersion:$,browserVersionFull:Aa,isiPhone:l,isiPad:m,isiOS:s,isAndroid:y,isWindowsPhone:B,isIE:q,isFirefox:k,isChrome:b,isSafari:p,isOpera:d,isEdge:A,isAndroidDefaultBrowser:f,isSmartPhone:o,isTablet:u,isDesktop:I,isWebkit:r}}(navigator.userAgent)})})();
(function(){function c(a){function c(){b=!0;e=this;h=s(arguments);if(ya(a)||va(a))return a;var f=s(arguments);if(0<d.length)for(var k=0,g=d.length;k<g;k++){var j=f;j!==arguments&&(j=J(j));G(d[k])&&d[k].apply(this,j)}return a}var b=!1,e=null,h=null,d=[];a.progress=function(){for(var f=s(arguments),c=0,k=f.length;c<k;c++){var g=f[c];if(E(g))a.progress.apply(this,g);else if(G(g))if(b){var j=h;j!==h&&(j=J(j));g.apply(e,j)}else d.push(g)}return this};a.notify=c;a.notifyWith=function(a,b){return!b?c.apply(a):
c.apply(a,b)}}function e(a){if(!a)return!1;for(var a=J(a),c=0,b=a.length;c<b;c++)if(G(a[c]))return!0;return!1}function h(q,k){function b(a){k?k[a]&&(q[a]=k[a]):(o[a]=q[a],q[a]=function(){return function(){if(!d){var b=s(arguments);if("then"===a||"pipe"===a)b=b[1];e(b)&&(d=!0)}return q._h5UnwrappedCall.call(this,a,s(arguments))}}(a),u[a]=q[a])}function p(a){return function(){var b=g.settings.commonFailHandler;!d&&b&&!f&&(q.fail.call(this,b),f=!0);return a.apply(this,arguments)}}if(q._h5UnwrappedCall)return q;
var r=!!q.progress;!r&&!A(q)?c(q):k&&(q.progress=k.progress);var d=!1,f=!1,o={},u={};q._h5UnwrappedCall=k?k._h5UnwrappedCall:function(b,d){d=J(d);a.extend(q,o);var f=q[b].apply(this,d);a.extend(q,u);return f};for(var l=0,F=j.length;l<F;l++){var D=j[l];q[D]&&b(D)}q.pipe&&!k&&(q.pipe=function(){for(var a=g.async.deferred(),b=s(arguments),d=0,f=C.length;d<f;d++){var c=this;(function(b,d,f){function k(){if(e){var d=b.apply(this,arguments);if(d&&G(d.promise)){h(d);d.done(a.resolve);d._h5UnwrappedCall("fail",
a.reject);G(d.progress)&&d.progress(a.notify)}else a[f+"With"](this,[d])}else a[f+"With"](this,arguments)}var e=G(b);if(!e&&d==="fail")c._h5UnwrappedCall(d,k);else c[d](k)})(b[d],C[d],m[d])}return a.promise()},u.pipe=q.pipe);if(q.then&&!k){var B=q.then;q.then=y?q.pipe:function(){var a=arguments,b=B.apply(this,a);!r&&e(a[2])&&q.progress.call(q,a[2]);return b};u.then=q.then}q.reject&&(q.reject=k&&k.reject?k.reject:p(q.reject));q.rejectWith&&(q.rejectWith=k&&k.rejectWith?k.rejectWith:p(q.rejectWith));
if(q.promise)if(k&&k.promise)q.promise=k.promise;else{var w=q.promise;q.promise=function(){return h(w.apply(this,arguments),q)}}return q}var j=["fail","always","pipe","then"],C=["done","fail","progress"],m=["resolve","reject","notify"],s=g.u.obj.argsToArray,y=function(){var c=a.Deferred();return c!==c.then()}(),B=function(){var c=a.Deferred();return h(c)},A=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};g.u.obj.expose("h5.async",{deferred:B,when:function(){var c=s(arguments);1===c.length&&
E(c[0])&&(c=c[0]);var k=c.length,b=g.async.deferred(),e=b.promise(),h=a.when.apply(a,c).done(function(){b.resolveWith(this&&this.promise&&this.promise()===h?b:this,s(arguments))}).fail(function(){b.rejectWith(this,s(arguments))});if(h.progress)h.progress(function(){b.notifyWith(this===h?e:this,s(arguments))});else{for(var d=[],f=0;f<k;f++)d[f]=void 0;for(var j=function(a){return function(f){d[a]=1<arguments.length?s(arguments):f;b.notifyWith(e,d)}},f=0;f<k;f++){var u=c[f];u&&G(u.promise)&&u.progress&&
(1<k?u.progress(j(f)):u.progress(function(){b.notifyWith(e,s(arguments))}))}}return e},isPromise:A,loop:function(c,k,b){E(c)||l(5E3);var e=B(),h="number"===a.type(b)?b:20,d=0,f=c.length,g,j=null,m=function(){if(d===f)e.resolve(c);else{var a=k.call(c,d,c[d],j);d++;A(a)?a.done(function(){g()}).fail(function(){e.reject(c)}):g()}},s=function(){setTimeout(function(){var a=d-1;0<d&&e.notify({data:c,index:a,value:c[a]});m()},0)},y=!1;g=function(){y||(0===d%h?s():m())};var C=!1,j={resume:function(){!C&&y&&
(y=!1,g())},pause:function(){y=!0},stop:function(){C=!0;e.resolve(c)}};s();return e.promise()}})})();(function(){function c(a,c){for(var e=0,h=l.length;e<h;e++){var g=l[e];a[g]&&(c[m[g]](a[g]),a[g]=void 0)}}function e(c,e,h){for(var g in e)if(e.hasOwnProperty(g)&&(h||!G(e[g]))&&-1===a.inArray(g,j))c[g]=e[g]}function h(a,c){e(this,a,!0);c.promise(this);var h=this.always;this.always=function(){h.apply(this,arguments);return this}}var j=["error","success","complete"],l=["error","success","complete"],
m={success:"done",error:"fail",complete:"always"};g.u.obj.expose("h5",{ajax:function(){function j(a,c,h){e(k,h);q.resolveWith(this,arguments)}function m(b,c,h){if(0===l.retryCount||!1===l.retryFilter.apply(this,arguments))e(k,b),q.rejectWith(this,arguments);else if(l.retryCount--,this.async){var d=this;setTimeout(function(){a.ajax(d).done(j).fail(m)},l.retryInterval)}else a.ajax(this).done(j).fail(m)}var l={},C=arguments;w(C[0])?(a.extend(l,C[1]),l.url=C[0]):a.extend(l,C[0]);var l=a.extend({},g.settings.ajax,
l),q=g.async.deferred();c(l,q);var C=a.ajax(l),k=new h(C,q);C.done(j).fail(m);return k}})})();(function(){function c(a,c){this.id=a;this.content=c}function e(a,c,b){this.url=a;this.path=c;this.content=b}function h(a){this._resourceKey=a}function j(a){function c(a,b){if(0!==b.indexOf("../"))return a+b;b=b.slice(3);a=a.replace(/[^\/]+?\/$/,"");return c(a,b)}var b=g.settings.res.baseUrl;if(a===aa(a)||0===a.indexOf("/"))return a;if(!b)return 0===a.indexOf("./")?a:"./"+a;g.u.str.endsWith(b,"/")||(b+="/");
return c(b,a)}function l(a,c,b){void 0===b&&G(a)&&(b=a,a=void 0);s.unshift({type:a,test:c,resolver:b})}var m=g.async.deferred,s=[],y={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var B={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var b=aa(a);c||delete this.cache[b];for(var e=0,h=this.cacheUrls.length;e<
h;e++)if(this.cacheUrls[e]===b){this.cacheUrls.splice(e,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var c=aa(a);if(this.accessingUrls[c])return this.accessingUrls[c];var b=m(),h=b.promise();this.accessingUrls[c]=h;var j=this;g.ajax(a,{dataType:"text"}).done(function(d,f,h){delete j.accessingUrls[c];d=new e(c,a,h.responseText);j.append(d);
b.resolve(d)}).fail(function(d){delete j.accessingUrls[c];b.reject(ca(17E3,[d.status,c],{url:c,path:a,error:d}))});return h}},A={load:function(a){var c=aa(a);return B.cache[c]?m().resolve(B.getResourceFromCache(c)).promise():B.loadResourceFromPath(a)},clearCache:function(a){B.clearCache(a)},clearAllCache:function(){B.clearAllCache()}};a.extend(h.prototype,{resolve:function(c){function e(b){for(var d=0,f=s.length;d<f;d++)if(!(c&&c!==s[d].type)){var k=s[d].test;if(!c&&k)if("regexp"===a.type(k)){if(!k.test(b))continue}else if(!1===
k(b))continue;return s[d].resolver(b,c)}return!1}if(!E(this._resourceKey))return e(this._resourceKey);for(var b=this._resourceKey,h=[],j=0,d=b.length;j<d;j++){var f=e(b[j]);h.push(f)}var o=g.async.deferred();Z(h,function(a){E(a)||(a=[a]);a.unshift(a.slice(0));o.resolveWith(o,a)},function(a){o.reject(a)});return o.promise()},getKey:function(){return this._resourceKey}});l("namespace",null,function(a){var c=y[a]||g.u.obj.getByPath(a);if(c)return m().resolve(c).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();
var c=j(a.replace(/\./g,"/"))+".js",b=m(),e=g.settings.res.resolveTimeout,h=null;0<e&&(h=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],b.reject(ca(17001,[a])))},e));waitingInfoMap[a]={deferred:b,timer:h};g.u.loadScript(c).done(function(){var d=y[a]||g.u.obj.getByPath(a);d&&waitingInfoMap[a]&&(y[a]=d,delete waitingInfoMap[a],clearTimeout(h),b.resolve(d))}).fail(function(d){clearTimeout(h);delete waitingInfoMap[a];b.reject(d)});return b.promise()});l("ejsfile",/.*\.ejs(\?.*$|$)/,
function(e){var k=m();A.load(j(e)).done(function(b){var e=a(b.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<e.not('script[type="text/ejs"]').length?k.reject(ca(7011,null,{url:b.url,path:b.path})):(0===e.length&&k.reject(ca(7001,null,{url:b.url,path:b.path})),e.each(function(){var d=a.trim(this.id);d||k.reject(ca(7002,null,{url:b.url,path:b.path}));var f=a.trim(this.innerHTML);h.push(new c(d,f))}),k.resolve({url:b.url,path:b.path,templates:h}))}).fail(function(a){var c=
a.detail,c=ca(7003,[c.error.status,c.url],c);a.code=c.code;a.message=c.message;a.detail=a.detail;k.reject(a)});return k.promise()});l("jsfile",/.*\.js(\?.*$|$)/,function(a){return g.u.loadScript(j(a))});l("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=j(a);c.appendChild(b);return m().resolve(b).promise()});g.u.obj.expose("h5.res",{dependsOn:function(a){return new h(a)},isDependency:function(a){return a instanceof
h},register:function(a,c,b,e){b&&(e?g.u.obj.expose(e,c):g.u.obj.expose(a,c));y[a]=c;if(b=waitingInfoMap[a])delete waitingInfoMap[a],a=b.deferred,(b=b.timer)&&clearTimeout(b),waitingForImmediateDeferred.push({dfd:a,value:c}),waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),b=0,c=a.length;b<c;b++)a[b].dfd.resolve(a[b].value)},0))},get:function(a){return g.res.dependsOn(a).resolve()}})})();
(function(){function c(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function e(a,b,d,c){if(!Za){Za={};var a=new Da(null,"a"),f;for(f in a)a.hasOwnProperty(f)&&"__name"!==f&&"__templates"!==f&&"__meta"!==f&&(Za[f]=1);a=Da.prototype;for(f in a)a.hasOwnProperty(f)&&(Za[f]=null)}for(var e in d)e in Za&&l(Bb,[c,e],{controllerDefObj:d})}function h(b,d){function c(f,e){-1!==a.inArray(f,e)&&
l(Cb,[d],{controllerDefObj:b});k(f,function(a){c(a,e.concat([f]))},!0)}c(b,[])}function j(ob){function d(c,f){-1!==a.inArray(c,f)&&l(Db,[ob.__name],{logicDefObj:ob});b(c,function(a){d(a,f.concat(c))})}d(ob,[])}function C(b,d,c){null==b&&l(t,[c],{controllerDefObj:d});!w(b)&&"object"!==typeof b&&l(xb,[c],{controllerDefObj:d});b=a(b);0===b.length&&l(da,[c],{controllerDefObj:d});1<b.length&&l(Ua,[c],{controllerDefObj:d});b[0].nodeType!==nb&&b[0].nodeType!==ma&&l(Eb,[c],{controllerDefObj:d})}function m(a,
b,d,c,f){this.controller=a;this.event=b;this.evArg=d;this.selector=c;this.selectorType=f}function s(a){if(!v(this)&&this.__controllerContext.executeListeners)return a.proceed()}function y(a,b,d){var c=B(a.__name,b);d&&c.push(s);return A(a[b],b,c)}function B(a,b){var d=[],c=g.settings.aspects;if(!c||0===c.length)return d;for(var c=J(c),f=c.length-1;-1<f;f--){var e=c[f];if(!e.target||e.compiledTarget.test(a)){var t=e.interceptors;if(!e.pointCut||e.compiledPointCut.test(b))if(E(t))for(e=t.length-1;-1<
e;e--)d=d.concat(t[e]);else d.push(t)}}return d}function A(a,b,d){for(var c=function(a,b,d){return function(){var c=this;return d.call(c,{target:c,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(c,this.args)}})}},f=0,e=d.length;f<e;f++)a=c(a,b,d[f]);return a}function q(a,b,d){if(d&&a===pb)return d.rootElement;for(var c=["window","document","navigator"],f=0,e=c.length;f<e;f++){var t=c[f];if(a===t||qa(a,t+"."))return g.u.obj.getByPath(a,ka(b))}return d&&qa(a,"this.")?g.u.obj.getByPath(a.slice(5),
d):a}function k(a,b,d){if(d){var c=Ea.get(a.__name);if(c){d=0;for(e=c.childControllerProperties.length;d<e;d++){var f=c.childControllerProperties[d];if((t=a[f])&&!1===b(a[f],a,f))return!1}}else for(f in a){var c=a,e=f,t=d,n=c[e];if($a(e,db)&&"rootController"!==e&&"parentController"!==e&&n&&(t||n.__controllerContext&&!n.__controllerContext.isRoot&&(!n.parentController||n.parentController===c))&&!1===b(a[f],a,f))return!1}}else if(!v(a))for(var f=a.__controllerContext.childControllers,d=0,e=f.length;d<
e;d++){var t=f[d];if(!1===b(t,a))return!1}}function b(a,b){var d=Ea.get(a.__name);if(d)for(var c=0,f=d.logicProperties.length;c<f;c++){var e=d.logicProperties[c];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&$a(e,Fa)&&!1===b(a[e],a,e))return!1}function p(a,b,d,c){return!1===b.call(this,a,d,c)?!1:k(a,function(a,d,c){if(p(a,b,d,c)===false)return false})}function r(a,b,d,c){if(!1===k(a,function(a,d,c){if(!a||!1===r(a,b,d,c))return!1})||!1===b.call(this,a,d,c))return!1}function d(a,
b){var d=[];k(a,function(a){(a=a[b])&&d.push(a)});return d}function f(a){var b=a.__controllerContext.cache.bindMap,d=K(a.rootElement),c;for(c in b)for(var f=o(a,b[c],a[c]),e=0,t=f.length;e<t;e++)u(f[e],d)}function o(b,d,c){function f(b){var d=b.handler,c=b.controller;b.originalHandler||(b.originalHandler=d);b.handler=function(){var f=!b.isNativeBind&&g.settings.listenerElementType===1?a(this):this;d.call(c,H(b,arguments),f)}}var e=d.selector,t=d.eventName,h=d.bindTarget,k=d.isGlobal,p=d.isBindRequested;
switch(t){case "mousewheel":c=U(b,t,c);break;case n:case x:case z:var c=O(b,t,c),j=b.__controllerContext,t=!1;j.h5trackEventHandlerInfos=j.h5trackEventHandlerInfos||[];for(var v=j.h5trackEventHandlerInfos,j=0,o=v.length;j<o;j++){var r=v[j];if(h){if(aa(h,r.bindTarget)){t=!0;break}}else if(e===r.selector&&k===r.isGlobal&&p===r.isBindRequested){t=!0;break}}t||(c=X(b).concat(c),v.push(d));break;default:c=W(b,t,c)}E(c)||(c=[c]);j=0;for(o=c.length;j<o;j++)d=c[j],f(d),d.isBindRequested=p,d.isGlobal=k,d.bindTarget=
h,d.selector=e,d.controller=b;return c}function u(b,d){var c=b.controller,f=c.rootElement,e=b.selector,t=b.eventName,h=b.handler,k=b.isBindRequested,j=b.isGlobal;b.bindTarget?(b.evSelectorType=la.SELECTOR_TYPE_OBJECT,na(b)):j?(c=q(e,d,c),k||!w(c)?(b.evSelectorType=la.SELECTOR_TYPE_OBJECT,b.bindTarget=w(c)?a(c):c,na(b)):(b.evSelectorType=la.SELECTOR_TYPE_GLOBAL,a(d).delegate(c,t,h)),b.evSelector=c):(b.evSelectorType=la.SELECTOR_TYPE_LOCAL,b.evSelector=e,k?(b.bindTarget=a(e,f),na(b)):a(f).delegate(e,
t,h));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Ia&&t===n&&null!=g.settings.trackstartTouchAction&&(j?a(b.evSelector,d):a(b.evSelector,f)).each(function(){this.style[xa]=g.settings.trackstartTouchAction}))}function I(b,d,c){var f=b.controller,e=f.rootElement,t=b.selector,n=b.handler,h=b.eventName,k=b.isGlobal;if(b.bindTarget)d=b.bindTarget,e=b.eventName,t=b.handler,b.isNativeBind?d.removeEventListener(e,t):a(d).unbind(e,t);else if(k){if(null==ka(d))return;a(d).undelegate(t,
h,n)}else a(e).undelegate(t,h,n);c||(c=f.__controllerContext.boundHandlers,c.splice(a.inArray(b,c),1))}function F(a,b){p(a,function(a){a.__controllerContext.executeListeners=b})}function D(a,b,d){return function(){var c=null,f=a[b],e=a.__name,t=!1,t="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!t&&f)try{c=a[b]({args:a.__controllerContext.args})}catch(n){ia(a,n)}c&&G(c.done)&&G(c.fail)?c.done(d).fail(function(){var b=ca(Fb,e,Ra(arguments));ia(a.rootController,null,b)}):d()}}function $(a,
b){ja(a)||p(a,function(c){var d,f;"__init"===b?(d=N(c),f=[c.preInitPromise],c.parentController&&f.push(c.parentController.initPromise)):"__postInit"===b?(d=Ba(c),f=ra(c)):(d=T(c),f=Aa(c));var e=a.__controllerContext;e.waitingPromisesManagerMap=e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=Z(f,D(c,b,d))})}function ra(a){var b=d(a,"postInitPromise");b.push(a.initPromise);return b}function Aa(a){var b=d(a,"readyPromise");b.push(a.postInitPromise);return b}function N(b){return function(){function c(){var a=
!0;p(b.rootController,function(b){return a=b.isInit});return a}if(!P(b))if(b.isInit)c()&&V(b.rootController);else{b.isInit=!0;var d=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var f=b.rootElement;try{var e=b.__meta,t=b.__controllerContext.childControllers,n;for(n in e)-1!==a.inArray(b[n],t)&&(b[n].__controllerContext.metaRootElement=e[n]&&e[n].rootElement);k(b,function(a){var c=a.__controllerContext.metaRootElement;
delete a.__controllerContext.metaRootElement;a.rootElement||(c=c?M(c,a,b):f,C(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(h){ia(b,h);return}e=c();d.resolveWith(b);!P(b)&&e&&V(b.rootController)}}}function Ba(b){return function(){if(!P(b)){b.isPostInit=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=Z(ra(b),function(){if(!P(b)){var d=c.postInitDfd;if(d&&(delete c.postInitDfd,d.resolveWith(b),
!P(b)&&!c.isExecutedBind))if(c.isRoot){var d=b.__meta,e=c.childControllers,t;for(t in d)-1!==a.inArray(b[t],e)&&(b[t].__controllerContext.metaUseHandlers=d[t]&&d[t].useHandlers);p(b,function(a){var b=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==b&&f(a))});if(!1!==c.managed&&(a(b.rootElement).trigger("h5controllerbound",b),P(b)))return;ba(b)}else b.rootController.isPostInit&&((!b.parentController.__meta||
!1!==b.parentController.__meta.userHandlers)&&f(b),ba(b.rootController))}})}}}function T(b){return function(){if(!P(b)){b.isReady=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__ready=Z(Aa(b),function(){if(!P(b)){var d=c.readyDfd;d&&(delete c.readyDfd,d.resolveWith(b),!P(b)&&c.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function Ca(b,c){if(!w(b))return a(b);var d=a.trim(b);return eb.test(d)?(d=a.trim(d.substring(1,d.length-
1)),a(q(d,K(c.rootElement),c))):a(c.rootElement).find(b)}function W(a,b,c){return{controller:a,eventName:b,handler:c}}function U(a,b,c){return{controller:a,eventName:typeof document.onmousewheel===oa?"DOMMouseScroll":b,handler:function(b){var d=b.event;null==d.wheelDelta&&d.originalEvent&&null!=d.originalEvent.wheelDelta&&(d.wheelDelta=d.originalEvent.wheelDelta);null==d.wheelDelta&&d.originalEvent&&null!=d.originalEvent.detail&&(d.wheelDelta=40*-d.originalEvent.detail);c.call(a,b)}}}function O(b,
c,d){var f=null;if(c===n)return W(b,c,d);f=W(b,c,function(b){var c=b.event,f=c.h5DelegatingEvent;if(!f)return d.apply(this,arguments);f=f.type;if("mousemove"===f||"mouseup"===f)f=a(c.currentTarget).offset()||{left:0,top:0},c.offsetX=c.pageX-f.left,c.offsetY=c.pageY-f.top;d.apply(this,arguments)});f.originalHandler=d;return f}function X(b,c){function d(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=a[c]);b.h5DelegatingEvent=
a}function f(c,e,t){return function(j){var p;a:{switch(c){case "touchstart":case "mousedown":p=n;break a;case "touchmove":case "mousemove":p=x;break a;case "touchend":case "mouseup":p=z;break a}p=void 0}var v=p===n;if(!v||!g){var Qa=0===j.event.type.indexOf("touch");Qa&&ga(j.event,c);var o=new a.Event(p);d(j.event,o);var r=j.event.target;e&&(r=e);t&&t(o);var l=j.event.originalEvent||j.event;v&&-1===a.inArray(l,Ka)&&(Ka=[],Sa=[]);var da=a.inArray(l,Ka);-1===da&&(da=Ka.push(l)-1,Sa[da]=!1);if(!Sa[da]&&
(!Qa||g||v))Sa[da]=!0,a(r).trigger(o,j.evArg),g=!0;if(j.event.currentTarget===document&&(p===z&&(Ka=[],Sa=[]),-1!==a.inArray(l,Ka)))Ka.splice(da,1),Sa.splice(da,1);if(v&&g){o.isDefaultPrevented()||o.h5DelegatingEvent.preventDefault();p=o.target;var m=o.clientX,lb=o.clientY,H=Qa?"touchmove":"mousemove",u=Qa?"touchend":"mouseup",Ua=f(H,p,function(a){var b=a.clientX,c=a.clientY;a.dx=b-m;a.dy=c-lb;m=b;lb=c}),s=f(u,p),q=function(a){j.event=a;j.evArg=S(arguments);Ua(j)},ja=function(a){j.event=a;j.evArg=
S(arguments);s(j)},P=Qa?a(p):h;k=function(){Ka=[];Sa=[];P.unbind(H,q);P.unbind(u,ja);if(!Qa&&b.rootElement!==document){a(b.rootElement).unbind(H,q);a(b.rootElement).unbind(u,ja)}};P.bind(H,q);P.bind(u,ja);!Qa&&b.rootElement!==document&&(a(b.rootElement).bind(H,q),a(b.rootElement).bind(u,ja))}else p===z&&(k(),g=!1)}}}function e(a){return{controller:b,selector:c,eventName:a,handler:f(a),isInnerBindObj:!0}}var t=typeof document.ontouchstart!==oa,h=a(K(b.rootElement)),k=null,g=!1,j=[e("mousedown")];t&&
j.push(e("touchstart"));return j}function fa(b){if("svg"!==b.tagName.toLowerCase()||Ja())return a(b).offset();var d=K(b).createElementNS(ab,"rect"),f=b.viewBox,e=f.baseVal.y;d.setAttribute("x",f.baseVal.x);d.setAttribute("y",e);d.setAttribute("width",1);d.setAttribute("height",1);c(d);b.appendChild(d);f=a(d).offset();b.removeChild(d);return f}function ga(a,b){var c=a.originalEvent;if(c){var d="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],f=d.pageX,e=d.pageY;a.pageX=c.pageX=f;
a.pageY=c.pageY=e;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===window||d===document)d=document.body;d=fa(d);e-=d.top;a.offsetX=c.offsetX=f-d.left;a.offsetY=c.offsetY=e}}function S(a){return 3>a.length?a[1]:Ra(a).slice(1)}function H(a,b){var c=null,d=null;b&&(c=b[0],d=S(b));var f=c;if(f&&null==f.offsetX&&null==f.offsetY&&f.pageX&&f.pageY){var e=f.target;
if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=fa(e);f.offsetX=f.pageX-e.left;f.offsetY=f.pageY-e.top}return new m(a.controller,c,d,a.evSelector,a.evSelectorType)}function L(a){p(a,function(a){a.rootElement=null;a.view.__controller=null})}function M(b,c,d){null==b&&l(t,[c.__name]);!w(b)&&"object"!==typeof b&&l(xb,[c.__name]);b=d?Ca(b,d):a(b);0===b.length&&l(da,[c.__name]);1<b.length&&l(Ua,[c.__name]);return b.get(0)}function ba(b){var c=b.__controllerContext.managed,
d=La.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b);b.__controllerContext.triggerReadyExecuted=!0;$(b,"__ready")}function ha(a,b){!1===b?$(a,"__init"):setTimeout(function(){P(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||$(a,"__init")},0)}function V(a){a.__controllerContext.triggerPostInitExecuted=!0;$(a,"__postInit")}function qb(a,b){p(a,function(a){var c=ua();c.resolve();var d=a.__controllerContext;d.templatePromise=c.promise();d.initDfd=ua();d.postInitDfd=ua();d.readyDfd=ua();
d.isUnbinding=!1;d.isUnbinded=!1;d.isExecutedBind=!1;d.triggerPostInitExecuted=!1;d.triggerReadyExecuted=!1;d.args=b;a.initPromise=d.initDfd.promise();a.postInitPromise=d.postInitDfd.promise();a.readyPromise=d.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Va(b,c){var d=null,f=c;a.isPlainObject(f)?d=f.target:f={};d=d?Ca(d,b):b.rootElement;return g.ui.indicator.call(b,d,f)}function fb(a,b){var c=[],d=null;r(a,function(a){if(a[b]&&G(a[b])){try{var f=a[b]()}catch(e){d=d||e}wa(f)&&
c.push(f)}});if(d)throw d;return c}function ia(a,b,c){function d(){var a=b||c||h||j;r(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)});j?g.rejectWith(e,[j]):g.resolveWith(e);if(a&&(La.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||h))throw b||h;}function f(){j=h||ca(Gb,e.__name,Ra(arguments));d()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);
if(e){if(!ja(e)){e.__controllerContext.isDisposing=1;try{pa(e,c||b)}catch(t){b=b||t}var n,h=null;try{n=fb(e,"__dispose")}catch(k){b=b||k,h=h||k}var g=e.deferred(),j=null;h?f():Z(n,d,f,!0);return g.promise()}}else if(b)throw b;}function pa(b,c){if(!P(b)){b.__controllerContext.isUnbinding=1;rb(b,c);var d;try{fb(b,"__unbind")}catch(f){d=f}p(b,function(a){var b=a.rootElement;if(b){for(var b=K(b),c=a.__controllerContext.boundHandlers,d=0,f=c.length;d<f;d++)I(c[d],b,!0);a.__controllerContext.boundHandlers=
[]}});b.__controllerContext.unbindList={};La.controllers=a.grep(La.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);L(b);b.__controllerContext.isUnbinded=1;if(d)throw d;}}function Q(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?Q(a,b.parentController):g.core.view}function v(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function ja(a){return v(a)||a.__controllerContext.isDisposing}
function P(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||v(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function rb(a,b){var c=["postInitDfd","readyDfd"],d=[];p(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;c&&!ya(c)&&!va(c)&&c.rejectWith(a,[b])});for(var f=0,e=c.length;f<e;f++)for(var t=c[f],n=d.length-1;0<=n;n--){var h=d[n],k=h.__controllerContext[t];k&&!ya(k)&&!va(k)&&k.rejectWith(h,[b])}}function gb(a,b){for(var c=
a.childNodes,d=0,f=c.length;d<f;d++){var e=c[d];if(1===e.nodeType){if(e=gb(e,b))return e}else if(8===e.nodeType){var t=e.nodeValue;if(0===t.indexOf(hb)){var n=t.indexOf("}");if(-1!==n&&(t=t.slice(0,n).match(/id="([A-Za-z][\w-:\.]*)"/))&&t[1]===b)return e}}}return null}function bb(a){var b=this;return function(){return a.apply(b,arguments)}}function ib(a){var b=this;return function(){var c=g.u.obj.argsToArray(arguments);c.unshift(this);return a.apply(b,c)}}function Ma(a,b,c){function d(f){g.u.obj.getByPath("h5.core.view")||
l(Hb);c=E(c)?c:[c];for(var e=[],t=0,n=c.length;t<n;t++){var h=Wa(c[t])?c[t]:g.res.dependsOn(c[t]);e.push(h.resolve("ejsfile"))}Z(e,function(c){for(var c=E(c)?c:[c],d=0,f=c.length;d<f;d++)for(var e=c[d].templates,t=0,n=e.length;t<n;t++)try{a.view.__view.register(e[t].id,e[t].content)}catch(h){b.reject(h)}b.resolve()},function(a){var c=a.detail.error.status;f===g.settings.dynamicLoading.retryCount||0!==c&&c!==wb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){d(++f)},g.settings.dynamicLoading.retryInterval)})}
d(0)}function Ga(b,c,d,f){var e=w(b),t=e?null:b,b=e?a.trim(b):null,c=a.trim(c),n=!e||eb.test(b),h=sb.test(c);h&&(c=a.trim(a.trim(c.substring(1,c.length-1))));e&&n&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&l(Ib,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:t,isGlobal:n,isBindRequested:h,eventName:c,propertyKey:f}}function Na(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=
[]}function Oa(b){var c=new Na,d=c.logicProperties,f=c.eventHandlerProperties,e=c.functionProperties,t=c.otherProperties,n=c.bindMap,h=c.childControllerProperties,k={},g;for(g in b)if(-1!==g.indexOf(" ")&&G(b[g])){f.push(g);var j=a.trim(g),p=j.lastIndexOf(" "),j=Ga(j.substring(0,p),j.substring(p+1,j.length),b,g),p=j.selector,v=j.eventName,x=j.isGlobal,o=j.isBindRequested;k[p]||(k[p]={});k[p][v]||(k[p][v]={});k[p][v][x]||(k[p][v][x]={});k[p][v][x][o]?l(Jb,[b.__name,p,v],{controllerDef:b}):k[p][v][x][o]=
1;n[g]=j}else $a(g,db)&&b[g]&&!G(b[g])?h.push(g):$a(g,Fa)&&b[g]&&!G(b[g])?d.push(g):G(b[g])?e.push(g):t.push(g);return c}function Ta(){this.logicProperties=[];this.functionProperties=[]}function Pa(a){var b=new Ta,c=b.functionProperties,d=b.logicProperties,f;for(f in a)a.hasOwnProperty(f)&&$a(f,Fa)?d.push(f):G(a[f])&&c.push(f);return b}function Kb(c,d){function f(b,c,d){c=c.__logicContext.waitingPromises=c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(d))}function e(n){function h(){if(!n.__logicContext.isCalledReady){var e=
!0;b(n,function(a){return e=a.__logicContext.isReady});if(e){var k=G(n.__ready)&&n.__ready();n.__logicContext.isCalledReady=!0;wa(k)?(t.push(k),k.done(function(){n.__logicContext.isReady=!0;t.splice(a.inArray(k,t),1);n.__logicContext.waitingPromises=null;n===c&&d.resolveWith(n)})):(n.__logicContext.isReady=!0,n.__logicContext.waitingPromises=null,n===c&&d.resolveWith(n))}else for(var g=0,j=t.length;g<j;g++)f(t[g],n,h)}}n.__logicContext.isReady=!1;n.__logicContext.isCalledReady=!1;b(n,e);h()}var t=
[];e(c)}function aa(a,b){if(a===b)return!0;var c=ta(a),d=ta(b);if(!c&&!d)return!1;c=c?a.toArray():[a];d=d?b.toArray():[b];if(c.length!==d.length)return!1;for(var f=0,e=c.length;f<e;f++)if(c[f]!==d[f])return!1;return!0}function R(a,b){(!a||!a.rootElement)&&l(Lb,b)}function Y(a,b){(!a||v(a))&&l(Mb,b)}function na(b){var c=b.bindTarget,d=b.eventName,f=b.handler;c&&typeof c.nodeType!==oa||ub(c)||ta(c)?a(c).bind(d,f):!c||!c.addEventListener?b.isBindCanceled=!0:(c.addEventListener(d,f),b.isNativeBind=!0)}
function ea(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var c=a.rootController;p(b,function(a){a.rootController=c})}}function yb(a){this.__controller=a;g.u.obj.getByPath("h5.core.view")&&(this.__view=g.core.view.createView())}function Da(b,c,d,f,e){for(var t=0,n=za.length;t<n;t++)za[t](this);this.__name=c;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,
isRoot:e,boundHandlers:[],controllerDef:d,args:null};(b=d&&d.__defaultArgs)?this.__controllerContext.args=a.extend({},b,f):f&&(this.__controllerContext.args=f);this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=g.log.createLogger(c);this.view=new yb(this)}function Xa(){this.rootElement=document;this.controllers=[];a(document).bind(jb,function(a,b){null==b.target&&(b.target=
document);b.indicator=Va(this,b);a.stopPropagation()})}function kb(){this._init()}function Ya(b,c,d,f){var t=!f||!f.isInternal;if(!t&&v(f.rootController))return null;var n=c.__name;(!w(n)||0===a.trim(n).length)&&!Wa(c)&&l(tb,null,{controllerDefObj:c});d&&!a.isPlainObject(d)&&l(lb,[n],{controllerDefObj:c});c.__controllerContext&&l(Nb,null,{controllerDefObj:c});c.__defaultArgs&&(a.isPlainObject(c.__defaultArgs)||l(Ob,[n],{controllerDefObj:c}));var k=Ea.get(n);k||e(t,b,c,n);t&&h(c,n);k||(k=Oa(c),Ea.register(n,
k));t&&C(b,c,n);var g=new Da(b?a(b).get(0):null,n,c,d,t),j=t?g:f.rootController,p=ua(),n=p.promise().fail(mb),x=ua(),o=x.promise().fail(mb),r=ua(),da=r.promise().fail(mb),m=ua(),z=m.promise(),H=f&&f.async;!1===H&&(p.resolve(),x.resolve(),r.resolve(),m.resolve());t||z.fail(mb);b=g.__controllerContext;b.cache=k;b.preInitDfd=p;b.initDfd=x;b.postInitDfd=r;b.readyDfd=m;g.preInitPromise=n;g.initPromise=o;g.postInitPromise=da;g.readyPromise=z;b.childControllers=[];for(var u=t?[]:f.promisesForTriggerInit,
x=0,o=k.logicProperties.length;x<o;x++)r=k.logicProperties[x],n=c[r],Wa(n)?(da=n.resolve("namespace"),u.push(da),da.done(function(b,c){return function(d){d=cb(d);g[b]=d;u.splice(a.inArray(c,u),1);u.push(d.readyPromise);d.readyPromise.done(function(b){return function(){u.splice(a.inArray(b,u),1)}}(d.readyPromise))}}(r,da))):g[r]=cb(n);n=a.extend(!0,{},c);c=c.__templates;x=ua();o=x.promise();Wa(c)||c&&0<c.length?Ma(g,x,c):x.resolve();o.done(function(){ja(g)||p.resolveWith(g)}).fail(function(a){p.rejectWith(g,
[a]);ia(g,null,a)});x=0;for(o=k.eventHandlerProperties.length;x<o;x++)r=k.eventHandlerProperties[x],g[r]=y(n,r,!0);x=0;for(o=k.functionProperties.length;x<o;x++)r=k.functionProperties[x],g[r]=y(n,r);x=0;for(o=k.otherProperties.length;x<o;x++)r=k.otherProperties[x],g[r]=n[r];b.managed=f&&f.managed;try{if(g.__construct&&g.__construct({args:g.__controllerContext.args}),ja(g))return null}catch(Ua){return ia(j,Ua),null}t?(g.rootController=g,g.parentController=null):(g.parentController=f.parentController,
g.rootController=f.rootController);if(g.__controllerContext.childControllers){x=0;f=g.__controllerContext.childControllers;for(o=f.length;x<o;x++)f[x].rootController=g.rootController}g.__controllerContext.isExecutedConstruct=!0;f=g.__meta;x=0;for(o=k.childControllerProperties.length;x<o;x++)if(r=k.childControllerProperties[x],c=n[r],b=null,f&&f[r]&&f[r].inheritParam&&(b=d),Wa(c))da=c.resolve("namespace"),u.push(da),da.done(function(b,c,d){return function(f){f=Ya(null,a.extend(true,{},f),d,{isInternal:true,
parentController:g,rootController:j,promisesForTriggerInit:u,async:H});if(f==null)return null;g[b]=f;g.__controllerContext.childControllers.push(f);u.splice(a.inArray(c,u),1)}}(r,da,b));else{b=Ya(null,a.extend(!0,{},n[r]),b,{isInternal:!0,parentController:g,rootController:j});if(null==b)return null;g.__controllerContext.childControllers.push(b);g[r]=b}if(t){var s=function(){u.length===0?ha(g,H):Z(u,s)};Z(u,s)}return g}function cb(b){function c(b,d){var f=b.__name;(!w(f)||0===a.trim(f).length)&&l(Pb,
null,{logicDefObj:b});b.__logicContext&&l(Qb,null,{logicDefObj:b});var e=Ea.get(f);e||(d&&j(b),e=Pa(b));for(var n=a.extend(!0,{},b),k=e.functionProperties,h=0,p=k.length;h<p;h++){var x=k[h];n[x]=y(n,x)}n.deferred=ua;n.log=g.log.createLogger(f);n.__logicContext={logicDef:b};n.own=bb;n.ownWithOrg=ib;Ea.register(f,e);G(n.__construct)&&n.__construct();f=e.logicProperties;h=0;for(p=f.length;h<p;h++)x=f[h],e=n[x],Wa(e)?(e=e.resolve(),t.push(e),e.done(function(b,d){return function(f){n[b]=c(f);t.splice(a.inArray(d,
t),1)}}(x,e))):n[x]=c(e);return n}function d(){0===t.length?Kb(n,f):Z(t,d)}var f=g.async.deferred(),e=f.promise(),t=[],n=c(b,!0);n.readyPromise=e;Z(t,d);return n}var ab="http://www.w3.org/2000/svg",la={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},db="Controller",Fa="Logic",n="h5trackstart",x="h5trackmove",z="h5trackend",pb="rootElement",jb="triggerIndicator",eb=/^\{.*\}$/,sb=/^\[.*\]$/,hb="{h5view ",t=6001,da=6003,Ua=6004,tb=6006,lb=6007,Nb=6008,Cb=6009,Db=6010,Bb=6011,Ib=
6012,Jb=6013,Pb=6017,Qb=6018,Hb=6029,xb=6030,Fb=6033,Eb=6034,Lb=6035,Mb=6036,Gb=6038,Ob=6046,ua=g.async.deferred,wa=g.async.isPromise,qa=g.u.str.startsWith,$a=g.u.str.endsWith,Ha=g.u.str.format,Ra=g.u.obj.argsToArray,ta=g.u.obj.isJQueryObject,Wa=g.res.isDependency,mb=function(){},La,Ea,Ka=[],Sa=[],xa="",Ia=function(){var a=document.createElement("div");return typeof a.style.touchAction!==oa?(xa="touchAction",!0):typeof a.style.msTouchAction!==oa?(xa="msTouchAction",!0):!1}(),za=[],Ja=function(){var b=
null;return function(){if(null!=b)return b;var d=document.createElementNS(ab,"svg");d.setAttribute("width",1);d.setAttribute("height",1);var f=document.createElementNS(ab,"rect");f.setAttribute("x",1);f.setAttribute("y",1);f.setAttribute("width",1);f.setAttribute("height",1);c(f);a(function(){document.body.appendChild(d);var a=d.getBoundingClientRect().top;d.appendChild(f);b=a===d.getBoundingClientRect().top;document.body.removeChild(d)});return b}}();a.extend(m.prototype,la);a.extend(yb.prototype,
{get:function(a,b){R(this.__controller,"view#get");return Q(a,this.__controller).get(a,b)},update:function(a,b,c){R(this.__controller,"view#update");a=Ca(a,this.__controller);return Q(b,this.__controller).update(a,b,c)},append:function(a,b,c){R(this.__controller,"view#append");a=Ca(a,this.__controller);return Q(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){R(this.__controller,"view#prepend");a=Ca(a,this.__controller);return Q(b,this.__controller).prepend(a,b,c)},load:function(a){R(this.__controller,
"view#load");return this.__view.load(a)},register:function(a,b){R(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){R(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){R(this.__controller,"view#isAvailable");return Q(a,this.__controller).isAvailable(a)},clear:function(a){R(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){R(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},
bind:function(b,c){R(this.__controller,"view#bind");var d=b;if(w(b)&&0===b.indexOf("h5view#")){for(var f=gb(this.__controller.rootElement,b.slice(7)),d=f.nodeValue,d=d.slice(d.indexOf("}")+1),e=a("<div>").append(d),d=[],t=e[0].childNodes,n=0,g=t.length;n<g;n++)d.push(t[n]);e.empty();e=document.createDocumentFragment();n=0;for(g=d.length;n<g;n++)e.appendChild(d[n]);f.parentNode.insertBefore(e,f.nextSibling)}return this.__view.bind(d,c)}});a.extend(Da.prototype,{$find:function(b){Y(this,"$find");R(this,
"$find");return a(this.rootElement).find(b)},deferred:function(){Y(this,"deferred");return ua()},trigger:function(b,c){Y(this,"trigger");R(this,"trigger");var d=w(b)?a.Event(b):b;a(this.rootElement).trigger(d,c);return d},own:function(){Y(this,"own");return bb.apply(this,Ra(arguments))},ownWithOrg:function(){Y(this,"ownWithOrg");return ib.apply(this,Ra(arguments))},bind:function(a,b){Y(this,"bind");this.__controllerContext.isRoot||l(6031);this.rootElement=M(a,this);this.view.__controller=this;qb(this,
b?b:null);ha(this);return this},unbind:function(){Y(this,"unbind");R(this,"unbind");this.__controllerContext.isRoot||l(6031);this.__controllerContext.isExecutedConstruct||l(6037);try{pa(this)}catch(a){ia(this,a)}},dispose:function(){Y(this,"dispose");this.__controllerContext.isRoot||l(6031);return ia(this)},triggerIndicator:function(b){Y(this,"triggerIndicator");R(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,b);a(this.rootElement).trigger(jb,[c]);return c.indicator},indicator:function(a){Y(this,
"indicator");R(this,"indicator");return Va(this,a)},enableListeners:function(){Y(this,"enableListeners");F(this,!0)},disableListeners:function(){Y(this,"disableListeners");F(this,!1)},throwError:function(a,b){Y(this,"throwError");var c=Ra(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){Y(this,"throwCustomError");2>arguments.length&&l(6005);var d=null;b&&w(b)?d=Error(Ha.apply(null,Ra(arguments).slice(1))):(d=Error(),d.detail=b);d.customType=a;throw d;
},on:function(a,b,c){Y(this,"on");R(this,"on");a=Ga(a,b,this);b=B(this.__name,"");b.push(s);for(var a=o(this,a,A(c,"",b)),b=0,d=a.length;b<d;b++){var f=a[b];f.isInnerBindObj||(f.originalHandler=c);u(f,K(this.rootElement))}},off:function(a,b,c){Y(this,"off");R(this,"off");for(var d=Ga(a,b,this),a=this.__controllerContext.boundHandlers,f=null,e=d.bindTarget,b=d.eventName,t=d.selector,n=d.isGlobal,d=d.isBindRequested,g=0,h=a.length;g<h;g++){var k=a[g];if(e){if(aa(e,k.bindTarget)&&b===k.eventName&&k.originalHandler===
c){f=k;break}}else if(t===k.selector&&n===k.isGlobal&&d===k.isBindRequested&&c===k.originalHandler){f=k;break}}f&&I(f,K(this.rootElement))},manageChild:function(b){Y(this,"manageChild");if(P(this))l(6041);else if(!b||!b.__controllerContext)l(6039);else if(P(b))l(6040);else{b.rootController!==b&&l(6042);ea(this,b);var c=La.controllers,b=a.inArray(b,c);-1!=b&&c.splice(b,1)}},unmanageChild:function(b,c){Y(this,"unmanageChild");if(P(this))l(6043);else if(b.parentController!==this)l(6044);else if(c=!1===
c?!1:!0,!c&&!b.rootElement)l(6045);else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var d=this.__controllerContext.childControllers,f=a.inArray(b,d);-1!==f&&d.splice(f,1);c?b.dispose():(La.controllers.push(b),d=this.__controllerContext.waitingPromisesManagerMap,f=b.__controllerContext.waitingPromisesManagerMap,d&&(d.__postInit&&d.__postInit.remove(b.postInitPromise),d.__ready&&d.__ready.remove(b.readyPromise)),f&&f.__init&&f.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||ba(b):V(b))}}});g.mixin.eventDispatcher.mix(Xa.prototype);a.extend(Xa.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var d=c&&c.deep,f=c&&c.name?J(c.name):null,e=a(b)[0],t=this.controllers,n=[],g=0,k=t.length;g<k;g++){var h=t[g];!(f&&-1===a.inArray(h.__name,f))&&h.rootElement&&(e===h.rootElement?n.push(h):d&&K(e)===K(h.rootElement)&&a.contains(e,h.rootElement)&&n.push(h))}return n}});
a.extend(kb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});Ea=new kb;La=new Xa;g.u.obj.expose("h5.core",{controllerManager:La,definitionCacheManager:{clear:function(a){Ea.clear(a)},clearAll:function(){Ea.clearAll()}}});var Za=null;sa.controllerInternal=Ya;sa.addControllerInstantiationHook=function(a){za.push(a)};sa.isDisposing=ja;
g.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&l(6032);return Ya(a,b,c)},logic:cb,expose:function(a){var b=a.__name;b||l(6019,null,{target:a});var c=b.lastIndexOf(".");if(-1===c)window[b]=a;else{var d=b.substr(0,c),b=b.substr(c+1,b.length),c={};c[b]=a;g.u.obj.expose(d,c)}}})})();(function(){function c(a){return a instanceof Date}function e(a){return function(c){for(var e=a.queries,d=0,f=e.length;d<f;d++){var g=e[d],k=g.compareFunction;if(!k(c[g.prop],g.queryValue))return!1}e=
a.userFunctions;d=0;for(f=e.length;d<f;d++)if(!e[d](c))return!1;e=a.nestedCriterias;d=0;for(f=e.length;d<f;d++)if(!e[d].match(c))return!1;return!0}}function h(a){return function(c){for(var e=a.queries,d=0,f=e.length;d<f;d++){var g=e[d],k=g.compareFunction;if(k(c[g.prop],g.queryValue))return!0}e=a.userFunctions;d=0;for(f=e;d<f;d++)if(!e[d](c))return!0;e=a.nestedCriterias;d=0;for(f=e.length;d<f;d++)if(e[d].match(c))return!0;return!1}}function j(b){var g=[],k=[],d=[],f={queries:g,nestedCriterias:k,userFunctions:d},
o;for(o in b)if(o!==s)if(a.isPlainObject(b[o]))k.push(j(b[o]));else if(G(b[o]))d.push(b[o]);else{var m=b[o],I=E(m)?m[0]:m,F=null,F=I instanceof RegExp?B:c(I)?A:y,D=a.trim(o.replace(/ +/g," ")).split(" "),C=D[1]||"=";(F=F[C])||l(q,[C,a.type(I)]);g.push({prop:D[0],queryValue:m,compareFunction:F})}f.match="or"===b[s]?h(f):e(f);return f}function C(a){this.result=a}function m(a){this._model=a}var s="__op",y={"=":function(a,c){return a===c},"!=":function(a,c){return a!==c},"<":function(a,c){return a<c},
">":function(a,c){return a>c},"<=":function(a,c){return a<=c},">=":function(a,c){return a>=c},between:function(a,c){var e=c[1];return c[0]<=a&&a<=e},"!between":function(a,c){var e=c[1];return a<c[0]||e<a},"in":function(b,c){return-1!==a.inArray(b,c)},"!in":function(b,c){return-1===a.inArray(b,c)}},B={"=":function(a,c){return c.test(a)},"!=":function(a,c){return!c.test(a)}},A={"=":function(a,e){return!c(a)?!1:a.getTime()===e.getTime()},"!=":function(a,e){return!c(a)?!0:a.getTime()!==e.getTime()},"<":function(a,
e){return!c(a)?!1:a.getTime()<e.getTime()},">":function(a,e){return!c(a)?!1:a.getTime()>e.getTime()},"<=":function(a,e){return!c(a)?!1:a.getTime()<=e.getTime()},">=":function(a,e){return!c(a)?!1:a.getTime()>=e.getTime()},between:function(a,e){if(!c(a))return!1;var g=e[0].getTime(),d=e[1].getTime(),f=a.getTime();return g<=f&&f<=d},"!between":function(a,e){if(!c(a))return!1;var g=e[0].getTime(),d=e[1].getTime(),f=a.getTime();return f<g||d<f},"in":function(a,e){if(!c(a))return!1;for(var g=a.getTime(),
d=0,f=e.length;d<f;d++)if(g===e[d].getTime())return!0;return!1},"!in":function(a,e){if(!c(a))return!0;for(var g=a.getTime(),d=0,f=e.length;d<f;d++)if(g===e[d].getTime())return!1;return!0}},q=1,k={};k[q]='演算子"{0}"で"{1}"型の値を比較することはできません';k[2]="{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません";k[3]="setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください";k[4]="setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。";k[5]="addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。";Ab(k);a.extend(m.prototype,
{setCriteria:function(a){this._criteria=j(a);return this},execute:function(){this._executeDfd=g.async.deferred();var a=[],c;for(c in this._model.items){var e=this._model.items[c];this._criteria.match(e.get())&&a.push(e)}if(this._orderFunction)a.sort(this._orderFunction);else if(this._addedOrders){var d=this._addedOrders,f=d.length;a.sort(function(a,b){for(var c=0;c<f;c++){var e=d[c],g=e.key,e=e.isAsc,k=a.get(g),g=b.get(g);if(k>g)return e?1:-1;if(k<g)return e?-1:1}return 0})}this._executeDfd.resolveWith(this,
[a]);return new C(a)},onQueryComplete:function(a){this._executeDfd.done(a);return this},setOrderFunction:function(a){G(a)||l(3);this._addedOrders&&l(5);this._orderFunction=a;return this},addOrder:function(a,c){this._model.schema.hasOwnProperty(a)||l(2,["addOrder",a,this._model.name]);this._orderFunction&&l(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:a,isAsc:!1!==c});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this}});Ha={createQuery:function(){return new m(this)}}})();
(function(){function c(a){return(a=a&&w(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function e(b,c){return function tb(b,d){if(!c[b])return!1;for(var f=0,e=c[b].length;f<e;f++)if(-1<a.inArray(c[b][f],d)||tb(c[b][f],d.concat([b])))return!0;return!1}(b,[])}function h(a){return"number"===typeof a&&isNaN(a)}function j(a,b){return null==a||h(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(w(a)||a instanceof
String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function C(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function m(b,c,d){function f(){e.push(r.call(this,arguments));if(d)throw null;}var e=[];try{if(!a.isPlainObject(b))throw f(Va),null;wa(b.name)||f(fb);var n=b.base,g=null;if(null!=n)if(!w(n)||0!==n.indexOf("@"))f(ia);else{var k=n.substring(1);c.models[k]?
g=c.models[k].schema:f(pa,k)}var h=b.schema;!g&&null==h&&f(Q);if(!g&&!a.isPlainObject(h))throw f(v),null;}catch(j){l(S,null,e)}}function s(b,d,f,n){function g(){k.push(r.call(this,arguments));if(n)throw null;}"object"!==typeof b&&l(L);var k=[];try{if(d){var x=!1,v;for(v in b)b[v]&&!0===b[v].id&&(x&&g(ja),x=!0);x||g(P)}var p={},x=function(a){if(null!=a){u&&g(gb,z);H.hasOwnProperty("defaultValue")&&g(sa,z);if(null==a.on)g(bb,z);else for(var c=J(a.on),d=0,f=c.length;d<f;d++)if(!b.hasOwnProperty(c[d])){g(bb,
z);break}"function"!==typeof a.calc&&g(ib,z);p[z]=J(a.on)}};v=function(a){u&&null==a&&(a="string");var b={};null!=a&&(w(a)?(u&&"string"!==a&&"integer"!==a&&g(ta,z),b=c(a),b.elmType?(b.dataModel&&(d||g(Ga,z,b.dataModel),f.models[b.dataModel]||g(Na,z,b.dataModel)),"enum"===b.elmType&&null==H.enumValue&&g(Oa,z)):g(Ga,z,a)):g(Ma,z))};var o=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var f=b[d];if(null!=f)switch(d){case "notNull":!0!==f&&!1!==f?g(Pa,z,d):u&&!f&&g(ea,z,d,f);break;case "min":case "max":switch(c.elmType){case "integer":(w(f)||
!C(f)||h(f))&&g(K,z,d);break;case "number":(w(f)||w(f)||!j(f)||Infinity===f||-Infinity===f||h(f))&&g(K,z,d);break;default:g(aa,z,d,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":w(f)||!C(f)||h(f)||0>f?g(Y,z,d):u&&"maxLength"===d&&0===f&&g(ea,z,d,f);break;default:g(aa,z,d,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==f&&!1!==f?g(Pa,z,d):u&&!f&&g(ea,z,d,f);break;default:g(aa,z,d,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==
a.type(f)&&g(R,z,d);break;default:g(aa,z,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&g(na,z,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g(na,z,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&g(na,z,"minLength","maxLength")}else g(Ta,z)},m=function(b,c){null!=b&&("enum"!==c.elmType&&g(ka,z),(!E(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(ca,z))},z;for(z in b){var H=null==b[z]?{}:b[z],u=d&&!!H.id;wa(z)||g(rb,z);x(H.depend);v(H.type);
var s={},q=u&&null==q?"string":H.type;w(q)&&(s=c(q));o(H.constraint,s);m(H.enumValue,s);u&&H.hasOwnProperty("defaultValue")&&g(Z,z)}for(var ba in p)e(ba,p)&&g(va,ba)}catch(y){l(M,null,k)}return!0}function y(a,b){var d=[];try{for(var f in a){var e=a[f];if(e&&(e.hasOwnProperty("defaultValue")||!e.type||!("array"===e.type||c(e.type).dimension))&&e.hasOwnProperty("defaultValue")){var g=e.defaultValue;b[f](g).length&&pushErrorReason(ma,f,g)}}return!0}catch(n){l(M,null,d)}}function B(a,b,d){var f={},e;
for(e in a){var g=f,n=e,h;h=d;var j=a[e]||{},x=[],v=null,p=0,v=j.type,o=j.constraint||{};b&&j.id&&(v=v||"string",o.notNull=!0,"string"===v&&(o.notEmpty=!0));v&&(p=c(v),v=p.elmType,p=p.dimension,x.push(q(v,{manager:h,enumValue:j.enumValue})));o&&x.push(A(o));h=k({checkFuncs:x,dimension:p});g[n]=h}return f}function A(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});
null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});return c}}function q(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return j(a,b)?[]:d};case "integer":return function(a,b){return C(a,b)?[]:d};case "string":return function(a,b){return null==a||w(a)||!b&&a instanceof String?[]:
d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var f;a:if(f=c.enumValue,h(b)){for(var b=0,e=f.length;b<e;b++)if(h(f[b])){f=!0;break a}f=!1}else f=null===b||-1<a.inArray(b,f);return f?[]:d};case "any":return function(){return[]}}var f=b.match(/^@(.+?)$/)[1],e=c.manager;return function(a){var b=e.models[f];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function k(a){var b=a.checkFuncs;if(!b||
0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,d){function f(a,n){if(!n){for(var k=0,h=b.length;k<h;k++){var t=b[k](a,d);if(t.length)return e=e.concat(t),!1}return!0}if(null==a)return!0;if(!E(a)&&!g.core.data.isObservableArray(a))return e.push({dimension:c}),!1;k=0;for(h=a.length;k<h;k++)if(!f(a[k],n-1))return!1;return!0}var e=[];f(a,c);return e}}function b(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&p(b[c].type)){var d=U();d.relatedItem=a;a._values[c]=
d;a._nullProps[c]=!0}}function p(a){return!a?!1:-1!==a.indexOf("[]")}function r(){return{code:arguments[0]}}function d(b,c,d,f){function e(c){for(var c=J(k[c].depend.on),d=0,f=c.length;d<f;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],n))return!1;return!0}function g(b,c){for(var d=0,f=c.length;d<f;d++){var e=h[c[d]];if(e)for(var n=0,k=e.length;n<k;n++){var t=e[n];-1===a.inArray(t,b)&&b.push(t)}}}var n=[],k=b.schema||b._model.schema,h=b._dependencyMap,j={};for(f?n=b._dependProps.slice():
g(n,J(d));0!==n.length;){for(var d=[],f=0,x=n.length;f<x;f++){var v=n[f];if(e(v)){var o=k[v].depend.calc.call(b,c);0!==b._validateItemValue(v,o,!0).length&&l(qb,[b._model?b._model.name:la,v,o]);j[v]={oldValue:b._values[v],newValue:o};k[v]&&p(k[v].type)?o?(b._values[v].copyFrom(o),b._nullProps[v]=!1):(b._values[v].copyFrom([]),b._nullProps[v]=!0):b._values[v]=o}else d.push(v)}g(d,n);n=d}return j}function f(a,b,c,d){for(var f in c){f in a||l(V,[d?d.name:la,f]);var e=c[f];if(!a[f]||!p(a[f].type)||c.hasOwnProperty(f))e=
b(f,e,d&&d._idKey===f),0<e.length&&l(ba,[d?d.name:la,f],e)}}function o(b,c,f,e){var n=b.schema||b._model.schema,k=[],x;for(x in c)if(!(f&&-1!==a.inArray(x,f))){var v=b._values[x],o=c[x];if(n[x]&&n[x].depend)v!==o&&l(ha,[b._model?b._model.name:la,x]);else{var z=n[x]&&n[x].type;p(z)&&(null==o?(o=[],b._nullProps[x]=!0):b._nullProps[x]=!1);if(z&&z.match(/string|number|integer|boolean/)){var m=o;if(E(m)){for(var m=m.slice(0),o=0,r=m.length;o<r;o++)m[o]=m[o]&&"object"===typeof m[o]?m[o]&&m[o].valueOf&&
m[o].valueOf():m[o];o=m}else o=m&&"object"===typeof m&&m.valueOf?m.valueOf():m}if(null!=o&&z&&z.match(/number|integer/)&&"number"!==typeof o)if(E(o)||g.core.data.isObservableArray(o)){m=0;for(r=o.length;m<r;m++)null!=o[m]&&j(o[m])&&(o[m]=parseFloat(o[m]))}else null!=o&&(o=parseFloat(o));if(!p(z)||!v||!v.equals(o))v===o||h(v)&&h(o)||(z&&-1!==z.indexOf("[]")&&g.core.data.isObservableArray(v)&&(v=v.toArray()),k.push({p:x,o:v,n:o}))}}if(k.length){c={};f=[];m=0;for(x=k.length;m<x;m++)v=k[m],n[v.p]&&p(n[v.p].type)?
v.n&&b._values[v.p].copyFrom(v.n):b._values[v.p]=v.n,c[v.p]={oldValue:v.o,newValue:b.get(v.p)},f.push(v.p);n={type:!0===e?"create":"change",target:b,props:c};a.extend(c,d(b,n,f,e));return n}}function u(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function I(a,b,c){if(a._manager)for(var d=u(a),f=0,e=c.length;f<e;f++){var n=c[f],g=n._values[a._idKey];d[g]||(d[g]=[]);d[g].push({type:b,item:n})}}function F(a,b){if(a._manager){var c=
u(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:qa,ev:b})}}function D(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var f=b[d]?b[d].depend:null;if(f)for(var f=J(f.on),e=0,n=f.length;e<n;e++){var g=f[e];c[g]||(c[g]=[]);-1===a.inArray(d,c[g])&&c[g].push(d)}}return c}function $(b,c){m(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);s(d,!0,c,!0);var f=B(d,!0,c);y(d,f,!0);return new Ba(d,b,f,c)}function ra(b,c){var d=[],f=[],e=[],n;for(n in b)b[n]&&
b[n].depend?f.push(n):d.push(n),b[n]&&b[n].type&&-1!==b[n].type.indexOf("[]")&&e.push(n);n=D(b);var g={},k;for(k in b){var h=b[k];if(!h||!h.depend){var j=null,j=h&&void 0!==h.defaultValue?h.defaultValue:null;g[k]=j}}return{_realProps:d,_dependProps:f,_aryProps:e,_dependencyMap:n,_createInitialValueObj:function(b){if(!b)return a.extend({},g);var c=a.extend({},g),d;for(d in b)c[d]=b[d];return c},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function Aa(b,c,d,f){var e=!1,n=["sort","reverse",
"pop","shift"],k=null;d.addEventListener("changeBefore",function(d){f&&(b._isRemoved||!f._manager)&&l(H,[b._values[f._idKey],d.method]);var h=g.u.obj.argsToArray(d.args);if(-1===a.inArray(d.method,n)){var j=!0;switch(d.method){case "splice":j=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}j&&(d=b._validateItemValue(c,h),0<d.length&&l(ba,c,d))}f?(f._manager&&(d=f._manager,h=f.name,d._oldValueLogs||(d._oldValueLogs={}),d._oldValueLogs[h]||(d._oldValueLogs[h]={}),d=d._oldValueLogs[h],
h=b._values[f._idKey],d[h]||(d[h]={}),d[h][c]||(d[h][c]=b._values[c].toArray())),(e=f._manager?f._manager.isInUpdate():!1)||f._manager.beginUpdate()):k=b._values[c].toArray()});d.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var n={type:"change",target:b,props:{}};n.props[c]={};f?(F(f,n),e?a.stopImmediatePropagation():(f._manager._isArrayPropChangeSilentlyRequested=!0,f._manager.endUpdate(),f._manager._isArrayPropChangeSilentlyRequested=!1)):d.equals(k)||(n.props[c]={oldValue:k,
newValue:b._values[c]},b.dispatchEvent(n))}})}function N(a){wa(a)||l(ga);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Ba(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var f in a)a[f]&&a[f].id&&(this._idKey=f);this._idType=(b=a[this._idKey].type)?"string"===b?X:fa:X;this.schema=a;this._itemConstructor=T(a,c,this);d.models[this.name]=this}function T(c,d,e){function n(a){b(this,c,k,a);a=k._createInitialValueObj(a);f(c,
k._validateItemValue,a,e);o(this,a,null,!0);for(var a=k._aryProps,d=0,g=a.length;d<g;d++)Aa(this,a[d],this.get(a[d]),e)}var k=ra(c,d);e._schemaInfo=k;g.mixin.eventDispatcher.mix(n.prototype);a.extend(n.prototype,k,Fa,{_model:e,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return n}function Ca(){}function W(){this.length=0;this._src=[]}function U(){return new W}function O(a){return a&&a.constructor===W?!0:!1}var X="string",fa="number",ga=15E3,S=15001,H=15005,L=15008,
M=15009,ba=15011,ha=15012,V=15013,qb=15016,Va=15900,fb=15901,ia=15902,pa=15903,Q=15904,v=6,ja=15800,P=15801,rb=15802,gb=15803,bb=15804,ib=15805,Ma=15806,Ga=15807,Na=15808,Oa=15809,Ta=15810,Pa=15811,K=15812,aa=15813,R=15814,Y=15815,na=15816,ka=15817,ca=15818,Z=15819,ma=15820,ea=15821,sa=15822,va=15823,ta=15824,la="n/a",qa=2,Fa={get:function(b){if(0===arguments.length)return a.extend({},this._values);var c=this._model;if(!(c?c.schema:this.schema).hasOwnProperty(b))l(15014,[c?c.name:la,b]);return this._values[b]},
set:function(a){var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);var c=this._model;c&&(this._isRemoved||!c._manager)&&l(H,[this._values[this._model._idKey],"set"],this);if(c)c._idKey in b&&b[c._idKey]!==this._values[c._idKey]&&l(15003,[c.name,this._idKey]),f(c.schema,c._schemaInfo._validateItemValue,b,c);else{var d=this.validate(b);if(d)throw d;}var d=null,e=c?c._manager.isInUpdate():!1;c&&!e&&c._manager.beginUpdate();this._isInSet=!0;d=o(this,b);this._isInSet=!1;c?(d&&F(c,d),e||
c._manager.endUpdate()):d&&this.dispatchEvent(d)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};g.mixin.eventDispatcher.mix(N.prototype);a.extend(N.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&l(S,null,[r(Va)]);if(!E(b))return this.models[b.name]?this.models[b.name]:$(b,this);var c=b.length;c||l(S,
null,[r(Va)]);for(var d={},f=[],e=0;e<c;e++){var n=b[e].name;if(this.models[n])x[e]=manager.models[b.name];else try{f.push(n);n=[];b[e].base&&n.push(b[e].base.substring(1));for(var g in b[e].schema){var k=b[e].schema[g];if(k){var h=k.type;h&&"@"===h.substring(0,1)&&(h=-1===h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),n.push(h))}}d[e]={depends:n}}catch(j){l(S)}}for(var x={size:0};x.size<c;){g={};k=!1;for(e=0;e<c;e++)if(!d[e].registed){for(var n=d[e].depends,h=0,v=n.length;h<v;h++)if(!this.models[n[h]]){g[n[h]]=
!0;break}h===v&&(x[e]=$(b[e],this),x.size++,k=!0,d[e].registed=!0)}if(!k){var e=!0,o;for(o in g)if(-1===a.inArray(o,f)){e=!1;break}e&&l(15004);l(S,null,[r(pa,o)])}}b=[];for(e=0;e<c;e++)b.push(x[e]);return b},dropModel:function(a){if((a=w(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},f;for(f in b)if(b.hasOwnProperty(f)){var e;e=this.models[f];var n=b[f],g=[],k=[],j=[],x=[],v=void 0;for(v in n){for(var o=n[v],p=!0,z=[],m=o.length-1;0<=m;m--){var l=o[m],r=l.type;if(r===qa)z.push(l.ev);else{a:{for(p=0;p<m;p++){var H=o[p].type;if(1===H||3===H){m=o[p];break a}}m=null}if(1===r)m&&3===m.type?g.push({id:v,oldItem:m.item,newItem:l.item}):k.push(l.item);else if(m=
m&&3===m.type?m.item:m?null:l.item)x.push(m),m.dispatchEvent({type:"remove",model:e});p=!1;break}}if(p&&0<z.length){l={};for(m=z.length-1;0<=m;m--)for(var u in z[m].props)l[u]||(O(e.get(v).get(u))?(r=c&&c[e.name]&&c[e.name][v]&&c[e.name][v][u],e.get(v).get(u).equals(r)||(l[u]={oldValue:r})):l[u]={oldValue:z[m].props[u].oldValue});m=!1;for(u in l)r=l[u].oldValue,o=e.get(v).get(u),r===o||h(r)&&h(o)?delete l[u]:(m=e.get(v).get(u),a&&O(m)&&m.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
l[u].newValue=m,m=!0);m&&(z={type:"change",target:z[0].target,props:l},j.push(z),z.target.dispatchEvent(z))}}(e=0===k.length&&0===g.length&&0===x.length&&0===j.length?!1:{created:k,recreated:g,removed:x,changed:j})&&(d[f]=e)}a=!1;for(f in d)a=!0,e=d[f],this.models[f].dispatchEvent({type:"itemsChange",created:e.created,recreated:e.recreated,removed:e.removed,changed:e.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});g.mixin.eventDispatcher.mix(Ba.prototype);a.extend(Ba.prototype,{create:function(a){this._manager||l(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var c=[],d=J(a),f=[],e=this._idKey,n=0,g=d.length;n<g;n++){var k=d[n],h=k[e],j=this._findById(h);j?(f.push(j),(h=o(j,k,[e]))&&F(this,h)):(k=new this._itemConstructor(k),this.items[h]=
k,this.size++,c.push(k),f.push(k))}0<c.length&&I(this,1,c);b||this._manager.endUpdate();return E(a)?f:f[0]},validate:function(a,b){try{var c=this._idKey,d=J(a);"object"!==typeof a&&!E(a)&&l(15007);if(b)for(var e=0,n=d.length;e<n;e++){var g=d[e],k=g[c];(""===k||null==k)&&l(15002,[this.name,c]);var h=this._schemaInfo._createInitialValueObj(g);f(this.schema,this._schemaInfo._validateItemValue,h,this)}else for(var e=0,j=d.length;e<j;e++)g=d[e],f(this.schema,this._schemaInfo._validateItemValue,g,this)}catch(x){return x}return null},
get:function(a){if(E(a)||g.core.data.isObservableArray(a)){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||l(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=this._idKey,d=J(a),f=[],e=[],n=0,g=d.length;n<g;n++)if(this.has(d[n])){var k=w(d[n])||C(d[n],!0)?d[n]:d[n]._values[c],h=this.items[k];delete this.items[k];this.size--;e.push(h);h._model&&
(h._isRemoved=!0);f.push(h)}else e.push(null);0<f.length&&I(this,3,f);b||this._manager.endUpdate();return E(a)?e:e[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return w(a)||C(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&G(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===oa?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},createQuery:Ha.createQuery});g.mixin.eventDispatcher.mix(Ca.prototype);a.extend(Ca.prototype,Fa,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);f(this.schema,this._validateItemValue,b)}catch(c){return c}return null}});
g.mixin.eventDispatcher.mix(W.prototype);var n={equals:function(a){var b=O(a);if(!b&&!E(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var d=this[c],f=a[c];if(!(d===f||h(d)&&h(f)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=O(a)?a._src:a;E(a)||l(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=
g.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)O(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},x="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),z;for(z in n)n.hasOwnProperty(z)&&-1===a.inArray(z,x)&&x.push(z);var pb=["concat","slice","splice","filter","map"],jb=["reverse","sort"],eb="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");z=0;for(var sb=x.length;z<sb;z++){var hb=
x[z];W.prototype[hb]=function(b){function c(){var f=d.apply(this._src,arguments);if(-1!==a.inArray(b,jb))f=this;else if(-1!==a.inArray(b,pb)){var e=U();e.copyFrom(f);f=e}return f}var d=n[b]?n[b]:Array.prototype[b];return-1===a.inArray(b,eb)?c:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(hb)}g.u.obj.expose("h5.core.data",
{createManager:function(a,b){wa(a)||l(ga);var c=new N(a);if(null!=b){""===b&&(b="window");var d={};d[a]=c;g.u.obj.expose(b,d)}return c},createObservableArray:U,createObservableItem:function(a){s(a,!1,null,!0);var c=B(a);y(a,c,!0);var d=new Ca,c=ra(a,c);b(d,a,c);d.schema=a;for(var e in c)d[e]=c[e];e=c._createInitialValueObj();f(a,c._validateItemValue,e);o(d,e,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)Aa(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:O,isObservableItem:function(a){return!(!a||
!a.constructor||!a._validateItemValue||G(a.getModel))},createSequence:function(b,c,d){function f(){return h}function e(){var a=h;h+=j;return a}function n(){return h.toString()}function g(){var a=h;h+=j;return a.toString()}function k(){}var h=null!=b?b:1,j=null!=c?c:1,b=1===d?{current:n,next:g,returnType:1}:{current:f,next:e,returnType:2};b.setCurrent=function(a){h=a};a.extend(k.prototype,b);return new k},SEQ_STRING:1,SEQ_INT:2})})();(function(){function c(c){return g.u.obj.isJQueryObject(c)?c:a(c)}
function e(){this.__cachedTemplates={}}var h=g.async.deferred,j={escapeHtml:function(a){return g.u.str.escapeHtml(a)}};a.extend(e.prototype,{load:function(c){var e=h(),j=null;switch(a.type(c)){case "string":a.trim(c)||l(7004);j=[c];break;case "array":j=c;0===j.length&&l(7004);for(var c=0,C=j.length;c<C;c++)w(j[c])?a.trim(j[c])||l(7004):l(7004);break;default:l(7004)}for(var C=[],c=0,A=j.length;c<A;c++)C.push(g.res.get(j[c]));var q=this;Z(C,function(a){for(var a=E(a)?a:[a],b=[],c,g=0,d=a.length;g<d;g++){for(var f=
a[g].templates,h=0,j=f.length;h<j;h++){if(!q.isValid(f[h].content)){c=f[h];break}b.push(f[h])}if(c)break}if(c)try{q.register(c.id,c.content)}catch(m){return m.detail.url=a[g].url,m.detail.path=a[g].path,e.reject(m)}g=0;for(d=b.length;g<d;g++)q.register(b[g].id,b[g].content);e.resolve()},function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,e){"string"!==a.type(e)?l(7E3,null,{id:c}):(!w(c)||
!a.trim(c))&&l(7002,[]);try{var g=new EJS.Compiler(e,"[");g.compile();this.__cachedTemplates[c]=g.process}catch(h){g=h.lineNumber,l(7010,[g?" line:"+g:"",h.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(c,e){var g=this.__cachedTemplates;(!w(c)||!a.trim(c))&&l(7002);(g=g[c])||l(7005,c);var h=e?a.extend(!0,{},e):{},C=h.hasOwnProperty("_h")?new EJS.Helpers(h):new EJS.Helpers(h,{_h:j}),q=null;try{q=g.call(h,h,C)}catch(k){l(7006,
k.toString(),k)}return q},update:function(a,e,g){return c(a).html(this.get(e,g))},append:function(a,e,g){return c(a).append(this.get(e,g))},prepend:function(a,e,g){return c(a).prepend(this.get(e,g))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===oa)this.__cachedTemplates={};else{var e=null;switch(a.type(c)){case "string":e=[c];break;case "array":c.length||l(7002);e=c;break;default:l(7002)}for(var c=0,g=e.length;c<g;c++){var h=e[c];(!w(h)||!a.trim(h))&&
l(7002)}c=0;for(g=e.length;c<g;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var h=null;null==c&&l(7007);E(c)?h=c:(h=a(c),0===h.length&&l(7007),h=h.toArray());(null==e||"object"!==typeof e||E(e)||g.core.data.isObservableArray(e))&&l(7009);return ta.createBinding(h,e)}});var C=new e;C.createView=function(){return new e};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),C.__cachedTemplates[c]=
e.process)})});g.u.obj.expose("h5.core",{view:C})})();(function(){function c(a,b){return!a||a.nodeType!==ma?void 0:a.getAttribute(b)}function e(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function h(a,b,c,d){var f=[],b=J(b);if(!0===d)return j(f,a,b,c),f;for(var a=a.childNodes,d=0,e=a.length;d<e;d++)j(f,a[d],b,c);return f}function j(a,b,c,d){if(b.nodeType===ma){for(var f=0,e=c.length;f<e;f++){var g=b.getAttribute(c[f]);if(typeof d===oa){if(null!==g){a.push(b);break}}else if(null!==
g&&g==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;f=0;for(e=b.length;f<e;f++)j(a,b[f],c,d)}}}function C(b,d){for(var b=J(b),f=[],e=0,g=b.length;e<g;e++){var k=b[e];if(k.nodeType===ma&&!(!0===d&&(null!=c(k,u)||null!=c(k,I))))for(var j=h(k,o,void 0,!0),p=0,l=j.length;p<l;p++){for(var m=!0,r=j[p];null!=r&&r!==k;r=r.parentNode)if(null!=c(r,u)||null!=c(r,I)){m=!1;break}m&&f.push(j[p])}}return a(f)}function m(b,d,f){for(var e=[],g=0,k=b.length;g<k;g++){var j=b[g];if(j.nodeType===ma){if(!0===
f){if(null!=j.getAttribute(d)){e.push(j);continue}if(null!=c(j,u)||null!=c(j,I))continue}for(var o=h(j,d,void 0,!1),p=0,l=o.length;p<l;p++){var r=a(o[p])[0],m=r.parentNode;(null==c(m,u)&&null==c(m,I)||m===j)&&e.push(r)}}}return a(e)}function s(a){return a&&a.addEventListener&&a.getModel&&!E(a)&&!g.core.data.isObservableArray(a)||g.core.data.isObservableItem(a)?!0:!1}function y(a,b){for(var c=0,d=a.length;c<d;c++){var f=a[c];f.nodeType===ma&&f.setAttribute(D,b)}}function w(b,d,f){var h=O++,k=d[0];
a(k).empty();if(f){!E(f)&&!g.core.data.isObservableArray(f)&&l(W);y(d,h);b._addBindingEntry(f,k,h);g.core.data.isObservableArray(f)&&!b._isWatching(f)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=d,f.addEventListener("change",d));var d=c(k,F),d=e(b._getSrcCtxNode(d).childNodes),j=[];b._loopElementsMap[h]=j;for(var h=k.ownerDocument.createDocumentFragment(),o=f.get?function(a){return f.get(a)}:function(a){return f[a]},p=0,r=f.length;p<r;p++){for(var m=[],
u=0,q=d.length;u<q;u++){var v=S(d[u]);m.push(v);h.appendChild(v)}j[p]=m;k.appendChild(h);A(b,m,o(p),!1,!0)}}}function A(a,b,c,d,f){b=J(b);if(d)w(a,b,c);else{d=O++;c&&(("object"!==typeof c||E(c)||g.core.data.isObservableArray(c))&&l(W),y(b,d),a._addBindingEntry(c,b,d));var e=s(c);e&&!a._isWatching(c)&&(d=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=d,c.addEventListener("change",d));C(b,f).each(function(){k(this,c,e)});q(a,b,c,!1,f);q(a,b,c,!0,f)}}function q(a,
b,d,f,e){var g=f?"data-h5-loop-context":"data-h5-context";m(b,g,e).each(function(){var b=c(this,g),e=null;d&&(e=s(d)?d.get(b):d[b]);A(a,this,e,f)})}function k(b,d,f){for(var e=c(b,o).split(N),g=[],h=[],k=[],j=0,p=e.length;j<p;j++){var m=e[j];if(-1===m.indexOf(G))0<a.trim(m).length&&(g.push(null),h.push(null),k.push(a.trim(m)));else{var r=m.split(G),m=a.trim(r[0]),r=a.trim(r[1]),u=null,v=Ba.exec(m);v&&(u=v[1],m=/(\S+)[\s\(]/.exec(m)[1]);0<m.length&&0<r.length&&(g.push(m),h.push(u),k.push(r))}}e=b.tagName.toLowerCase();
j=a(b);p=0;for(m=g.length;p<m;p++){var u=g[p],v=h[p],q=k[p],r=null;d&&(r=f?d.get(q):d[q]);null==u&&("input"===e?(u="attr",v="value"):u="text");switch(u){case "text":null==r?j.text(""):j.text(r);break;case "html":null==r?j.html(""):j.html(r);break;case "class":var u=c(b,ra),q=(v=null==u)?"":" ",P=!1;r&&(P=!RegExp("\\s"+r+"\\s").test(" "+u+" "));j[0].className=(v?"":u)+(P?q+r:"");break;case "attr":v||l(T);"input"===e&&"value"===v?null==r?j.val(""):j.val(r):null==r?j.removeAttr(v):j.attr(v,r);break;
case "style":v||l(T);null==r?j.css(v,""):j.css(v,r);break;default:l(K)}}}function b(a,b,c){for(var d=0,f=c.length;d<f;d++){var e=c[d];b.removeChild(e);a._removeBinding(e)}}function p(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(S(a[c]));return b}function r(a,b,c,d,f){for(var e=c.ownerDocument.createDocumentFragment(),g=[],h=0,k=f.length;h<k;h++){var j=p(c);g[h]=j;for(var o=0,r=j.length;o<r;o++)e.appendChild(j[o]);A(a,j,f[h])}Array.prototype[d].apply(b,g);return e}function d(a,c,d,
f,e,g){var h=f.length;if(0!==h){for(var k=f[0],j=k,d=1===h?d.length:j+f[1];j<d;j++){var o=e[j];o&&b(a,c,o)}e.splice(k,f[1]);if(!(2>=h)){j=e.length;j=0===j||0===k?c.firstChild:k>=j?null:e[k][0];d=g.ownerDocument.createDocumentFragment();k=[k,0];for(o=2;o<h;o++){for(var r=p(g),m=0,v=r.length;m<v;m++)d.appendChild(r[m]);A(a,r,f[o]);k.push(r)}c.insertBefore(d,j);Array.prototype.splice.apply(e,k)}}}function f(a,b){void 0!==a.nodeType?a.nodeType===ma&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=
a[0].parentNode,this._targets=e(a));this._bindRootId=X++;fa[this._bindRootId]=this;for(var d=[],f=0,g=this._targets.length;f<g;f++){var k=this._targets[f];if(k.nodeType===ma){k.setAttribute($,this._bindRootId);for(var j=h(k,[u,I],void 0,!0),p=0,r=j.length;p<r;p++){var m=U++;j[p].setAttribute(F,m)}j=h(k,o,void 0,!0);p=0;for(r=j.length;p<r;p++)m=j[p],/class\s*:/.test(c(m,o))&&""!=m.className&&m.setAttribute(ra,m.className)}d.push(k.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=
b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};A(this,this._targets,this._rootContext,!1,!0)}var o="data-h5-bind",u="data-h5-context",I="data-h5-loop-context",F="data-h5-dyn-ctx",D="data-h5-dyn-vid",$="data-h5-dyn-bind-root",ra="data-h5-dyn-cn",G=":",N=";",Ba=/\(\s*(\S+)\s*\)/,T=7100,K=7101,W=7102,U=0,O=0,X=0,fa={},ga={},S;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=void 0;d?(c.h5Dummy=void 0,S=function(b){var c=
b.ownerDocument;return b.nodeType===ma?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):S=function(a){return a.cloneNode(!0)}})();a.extend(f.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===ma){this._removeBinding(c);c.removeAttribute($);for(var d=h(c,ra,void 0,!0),f=0,e=d.length;f<e;f++)d[f].removeAttribute(ra);c=h(c,F,void 0,!0);f=0;for(d=c.length;f<d;f++)c[f].removeAttribute(F)}}delete fa[this._bindRootId]},_observableArray_changeListener:function(a){var f=
this._getViewsFromSrc(a.target);if(f)for(var e in f)if(f.hasOwnProperty(e)){var g=f[e],h=this._getSrcCtxNode(c(g,F)),k=this._loopElementsMap[e];switch(a.method){case "set":d(this,g,a.target,[a.args[0],1,a.args[1]],k,h);break;case "shift":case "pop":var j=k[a.method]();j&&b(this,g,j);break;case "unshift":j=r(this,k,h,a.method,a.args);g.insertBefore(j,g.firstChild);break;case "push":j=r(this,k,h,a.method,a.args);g.appendChild(j);break;case "splice":d(this,g,a.target,a.args,k,h);break;case "reverse":for(var j=
g,o=k;j.firstChild;)j.removeChild(j.firstChild);for(var m=0,g=o.length;m<g;m++)for(var h=o[m],l=h.length-1;0<=l;l--)j.insertBefore(h[l],j.firstChild);k.reverse();break;case "sort":case "copyFrom":case null:for(var j=this._loopElementsMap,o=e,m=a.target,l=k,k=h,h=0,u=l.length;h<u;h++)b(this,g,l[h]);for(var l=g.ownerDocument.createDocumentFragment(),u=[],h=0,q=m.length;h<q;h++){var v=p(k);u[h]=v;for(var ja=0,P=v.length;ja<P;ja++)l.appendChild(v[ja]);A(this,v,m.get(h))}g.appendChild(l);j[o]=u}}},_observableItem_changeListener:function(a){var b=
this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var f=this,e;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];C(g,d).each(function(){k(this,a.target,!0)});m(g,u).each(function(){var b=c(this,u);if(!(b in a.props))return!0;f._removeBinding(this);var d=c(this,F),d=f._getSrcCtxNode(d),d=S(d);this.parentNode.replaceChild(d,this);A(f,d,a.props[b].newValue)});m(g,I).each(function(){var b=c(this,I);if(!(b in a.props)||a.target._isArrayProp(b))return!0;f._removeBinding(this);
A(f,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var f=this._srces[b];if(c(f,F)===a)return f;f=h(f,F,a);if(0<f.length)return f[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);ga[c]=
a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=ga[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,s(b)?(b.removeEventListener("change",this._listeners[c]),d=!0):g.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],
delete this._srcToViewMap[c],this._usingContexts[c]=null))}ga[a]&&delete ga[a]}},_removeBinding:function(a){if(a.nodeType===ma){var b=c(a,D);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(D));for(var a=h(a,D),b=0,d=a.length;b<d;b++){var f=a[b];this._removeBindingEntry(c(f,D));f.removeAttribute(D)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});ta={createBinding:function(a,b){return new f(a,b)}}})();(function(){function c(a,b){return null==
a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(w(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function e(a,b){return!!(null==a||w(a)||!b&&a instanceof String)}function h(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean}function j(a){var b=a.name;a.isValid?(this.validProperties.push(b),this.validCount++):(this.isValid=!1,this.invalidProperties.push(b),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[b]=
{name:b,value:a.value,violation:[a.violation]});this.validatingProperties.splice(this.validatingProperties.indexOf(b),1);this.validCount+this.invalidCount===this.properties.length&&(this.isAllValid=this.isValid,this.dispatchEvent({type:B}))}function l(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=
a.invalidProperties.length;this.isAsync=a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this.addEventListener(y,j);this.dispatchEvent=function(){this._aborted||l.prototype.dispatchEvent.apply(this,arguments)}}function m(){this.rules=[];this.rulesMap={}}function s(a,b,c,e){q.addValidateRule(a,b,c,e)}var y="validate",B="validateComplete",A=g.async.isPromise,q=new m;g.mixin.eventDispatcher.mix(l.prototype);l.prototype.abort=function(){this.removeEventListener(y,j);this.dispatchEvent({type:"abort"});
this._aborted=!0};a.extend(m.prototype,{addValidateRule:function(a,b,c,e){if(this.rulesMap[a])for(var d=0,f=this.rules.length;d<f;d++)if(this.rules[d].ruleName===a){this.rules.splice(d,1);break}b={ruleName:a,func:b,priority:e,argNames:c};this.rules.push(b);this.rulesMap[a]=b},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var b=this.rulesMap;a.sort(function(a,
c){var d=b[a],f=b[c],d=null==d.priority?-Infinity:d.priority,f=null==f.priority?-Infinity:f.priority;return d===f?0:f-d})}});s("required",function(a){return null!=a&&""!==a},null,51);s("customFunc",function(a,b){return b(a)},["func"],50);s("assertNull",function(a){return null==a},null,50);s("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50);s("assertFalse",function(a){return null==a||h(a)&&!1==a},null,50);s("assertTrue",function(a){return null==a||h(a)&&!0==a},null,50);s("max",function(a,
b,e){return null==a||(c(a,!0)||a instanceof Number)&&(e?a<=b:a<b)},["max","inclusive"],50);s("min",function(a,b,e){return null==a||(c(a,!0)||a instanceof Number)&&(e?b<=a:b<a)},["min","inclusive"],50);s("future",function(a){return null==a||a instanceof Date&&(new Date).getTime()<a.getTime()},null,50);s("past",function(a){return null==a||a instanceof Date&&a.getTime()<(new Date).getTime()},null,50);s("digits",function(a,b,c){if(null==a)return!0;if(!e(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var g=
parseInt(a);return null!=b&&(0>g?-g:g)>=Math.pow(10,b)?!1:null!=c?(b=a.indexOf("."),-1===b?!0:a.slice(b+1).length<=c):!0},["integer","fruction"],50);s("pattern",function(a,b){return null==a||e(a)&&b.test(a)},["regexp"],50);s("size",function(c,b,g){b=b||0;g=g||Infinity;if(a.isPlainObject(c)){var h=0,d;for(d in c)h++;return b<=h&&h<=g}return null==c||(e(c)||E(c))&&b<=c.length&&c.length<=g},["min","max"],50);g.u.obj.expose("h5.validation",{defineRule:s});g.core.expose({__name:"h5.validation.FormValidationLogic",
_rule:{},_disableProperties:[],validate:function(c,b){var e={},g=[],d;for(d in c){if(a.isPlainObject(c[d]))for(var f in c[d])e[f]=c[d][f],g.push(f);e[d]=c[d]}d=null;b&&(d=(a.isArray(b)?b.slice(0):[b]).concat(g));return this._validate(e,d)},addRule:function(a){for(var b in a)this._rule[b]=a[b]},removeRule:function(a){E(a)||delete this._rule[a];for(var b=0,c=a.length;b<c;b++)delete this._rule[a[b]]},disableRule:function(c){for(var c=J(c),b=0,e=c.length;b<e;b++)-1===a.inArray(c[b],this._disableProperties)&&
this._disableProperties.push(c[b])},enableRule:function(c){for(var c=J(c),b=0,e=c.length;b<e;b++){var g=a.inArray(c[b],this._disableProperties);-1!==g&&this._disableProperties.splice(g,1)}},_validate:function(c,b){var e=[],g=[],d=[],f=[],h=null,j=b&&(E(b)?b:[b]),m=!1,s={},D;for(D in this._rule)if(!(b&&-1===a.inArray(D,j)||-1!==a.inArray(D,this._disableProperties))){var w=this._rule[D],B=c[D],G=!1,N=!1,J=[],T;for(T in w)J.push(T);q.sortRuleByPriority(J);for(var K=0,W=J.length;K<W;K++){T=J[K];var U=
w[T];if(c.hasOwnProperty(D)&&null!=U||"required"===T&&U){var O=this._convertBeforeValidate?this._convertBeforeValidate(B,T):B,U=E(U)?[O].concat(U):[O,U],X=q.getValidateFunction(T);if(!X)break;var X=X.apply(this,U),fa={},ga=q.getValidateArgNames(T);if(ga)for(var S=0,H=ga.length;S<H;S++)fa[ga[S]]=U[S+1];A(X)&&!ya(X)&&!va(X)&&(N=!0,s[D]=s[D]||[],s[D].push(X.promise({ruleName:T,value:O,ruleValue:fa})));if(!X||A(X)&&va(X))h=h||{},h[D]||(h[D]={name:D,value:B,violation:[]}),h[D].violation.push(this._createViolation(T,
fa)),G=!0}}N?(m=!0,f.push(D)):(G?g:e).push(D);d.push(D)}var j=!g.length,L=new l({validProperties:e,invalidProperties:g,validatingProperties:f,properties:d,invalidReason:h,isAsync:m,isValid:j,isAllValid:m?null:j});if(m){var M=this;for(D in s)e=s[D],g=function(a){return function(){L.dispatchEvent({type:y,name:a,isValid:!0,value:c[a]})}}(D),d=function(b,c){return function(){if(-1===a.inArray(b,L.invalidProperties)){for(var d,f,e,g=0,h=c.length;g<h;g++){var j=c[g];if(ya(j)){d=j.ruleName;f=j.ruleValue;
e=j.value;break}}L.dispatchEvent({type:y,name:b,isValid:!1,value:e,violation:M._createViolation(d,f,arguments)})}}}(D,e),a.when.apply(a,e).done(g).fail(d)}return L},_createViolation:function(a,b,c){a={ruleName:a,ruleValue:b};c&&(a.reason=g.u.obj.argsToArray(c));return a},_convertBeforeValidate:function(a,b){switch(b){case "max":case "min":return parseFloat(a);case "future":case "past":return new Date(a)}return a}})})();(function(){function c(b){var c={},d;for(d in ga){var f=a("<div></div>").addClass(b).addClass(d).appendTo("body"),
e=a.camelCase(d);c[e]={};a.map(ga[d],function(a){c[e][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function e(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function h(a,b){for(var c=[],d=a/2,f=0.8*a/2,e=360/b*Math.PI/180,g=1;g<=b;g++){var h=e*g,j=Math.cos(h),h=Math.sin(h);c.push({from:{x:d+f/2*j,y:d+f/2*h},to:{x:d+f*j,y:d+f*h}})}return c}function j(a){return function(){var b=document.body,c=document.documentElement,
d=L?b:M?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function l(a){return function(){var b=L?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function m(a){var b=L?document.body:document.documentElement;return O.isiOS?window["inner"+a]:b["client"+a]}function s(b){var c=a(b)[0],d=document.body,f=a("html")[0],
b={top:0,left:0};if(c===d&&M)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=L?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+Z()-c,left:b.left+ia()-d}}function y(){a.each(fa(arguments),
function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function B(a){a=X(a)?a[0]:a;return a===window||a===document||a===document.body}function A(a){return ka(K(a)).getComputedStyle(a,null)}function q(b,c){return!ka(K(b)).getComputedStyle?a(b).css(c):A(b)[c]}function k(b){if(!ka(K(b)).getComputedStyle)return a(b).height();var c=A(b);return b.offsetHeight-
parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function b(b){if(!ka(K(b)).getComputedStyle)return a(b).width();var c=A(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function p(b,c){if(!ka(K(b)).getComputedStyle)return a(b).outerHeight();var d=A(b);return k(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function r(c,d){if(!ka(K(c)).getComputedStyle)return a(c).outerWidth();
var f=A(c);return b(c)+parseFloat(f.paddingLeft)+parseFloat(f.paddingRight)+parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)+(d?parseFloat(f.marginLeft)+parseFloat(f.marginRight):0)}function d(b){if(!ka(K(b)).getComputedStyle)return a(b).innerHeight();var c=A(b);return k(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function f(c){if(!ka(K(c)).getComputedStyle)return a(c).innerWidth();var d=A(c);return b(c)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function o(b,c,d,
f){function e(){h+=g;h>d?(clearInterval(o),c.each(function(a){for(var c in b[a])this.style[c]=""}),f()):c.each(function(b){var c=j[b],d;for(d in c)c[d]+=k[b][d];a(this).css(c)})}var g=U,h=0,j=[],k=[];c.each(function(a){var f=b[a];k[a]={};j[a]={};var e=A(c[a]),h;for(h in f)j[a][h]=parseFloat(e[h]),k[a][h]=(parseFloat(f[h])-parseFloat(e[h]))*g/d});e();var o=setInterval(e,g)}function u(a,b,c){var d=[];a.each(function(){var a=parseFloat(q(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});
o(d,a,b,c)}function I(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});o(d,a,b,c)}function F(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(T)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=T;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=this.style.throbber.width;this.group=e("group",c,{width:d+"px",height:this.style.throbber.height+
"px"});this.group.className=Ba;for(var d=h(d,this.style.throbber.lines),f=this.style.throbberLine.color,g=this.style.throbberLine.width,j=0,k=d.length;j<k;j++){var o=d[j],m=o.from,l=o.to,o=e("line",c);o.strokeweight=g;o.strokecolor=f;o.fillcolor=f;o.from=m.x+","+m.y;o.to=l.x+","+l.y;m=e("stroke",c);m.opacity=1;o.appendChild(m);this.group.appendChild(o)}this._createPercentArea(c)}function D(b,d){var f=this,e=a(b);if(e.length){var h=B(e),e=h?a("body"):e,j=K(e[0]);if(j!==window.document&&(e[0]===j||
ka(j)===e[0]))e=a(j.body);var k=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=[];this._settings=k;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(k.theme));k.throbber&&a.extend(this._styles.throbber,k.throbber);this._isScreenLock=h;this._$target=e;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;
this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof k.fadeIn?k.fadeIn:-1;this._fadeOutTime="number"===typeof k.fadeOut?k.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=k.showThrobber||k.message;for(var e=g.u.str.format(aa,""===k.message?'style="display: none;"':"",k.message),h=
"https"===document.location.protocol?"return:false":"about:blank",o=0,m=this._$target.length;o<m;o++)this._$content=this._$content.add(a(j.createElement("div")).append(e).addClass($).addClass(k.theme).addClass(ra).css("display","none")),this._$overlay=this._$overlay.add((k.block?a(j.createElement("div")):a()).addClass($).addClass(k.theme).addClass(J).css("display","none")),this._$skin=this._$skin.add((M||L?a(j.createElement("iframe")):a()).attr("src",h).addClass($).addClass(N).css("display","none"));
var l=this._isScreenLock&&ba?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",l)});j=k.promises;k=function(){f.hide()};e=a.hasOwnProperty("curCSS")?"pipe":"then";E(j)?(j=a.map(j,function(a){return a&&G(a.promise)?a:null}),0<j.length&&za(g.async.when(j),e,[k,k])):j&&G(j.promise)&&za(j,e,[k,k])}}var $="h5-indicator",ra="content",J="overlay",N="skin",Ba="vml-root",T="h5-vmlstyle",aa='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
W=500,U=13,O=g.env.ua,X=g.u.obj.isJQueryObject,fa=g.u.obj.argsToArray,ga={throbber:["width","height"],"throbber-line":["width","color"]},S=!!document.createElement("canvas").getContext,H=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),L="CSS1Compat"!==document.compatMode,M=O.isIE&&6>=O.browserVersion,ba=!(O.isAndroidDefaultBrowser||
O.isiOS&&5>O.browserVersion||M||L||O.isWindowsPhone),ha=null,V=null,ca=null,ea=null,Z=null,ia=null,pa=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(f){f=a.camelCase(f);if(f in b.style)return!0;for(var f=f.charAt(0).toUpperCase()+f.slice(1),e=0;e<d;e++)if(c[e]+f in b.style)return!0;return!1}}(),V=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===
typeof window["inner"+a]?window["inner"+a]:L?b["client"+a]:c["client"+a]}}("Height"),ca=j("Height"),ea=j("Width"),Z=l("Top"),ia=l("Left"),ha=pa("animationName");F.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,
d=this.group.childNodes,f=0,e=d.length;f<e;f++){var g=d[f];if("textbox"!==g.nodeName){var h=f+1;g.firstChild.opacity=h==c?"1":h==c+1||h==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var j=this;this._runId=setTimeout(function(){j._run.call(j)},Math.floor(b/a))}},_createPercentArea:function(b){var c=e("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);
d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var Q=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,f=this.baseDiv,e=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";f.style.width=this.style.throbber.width+
"px";f.style.height=this.style.throbber.height+"px";f.appendChild(d);e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.style.lineHeight=this.style.throbber.height+"px";e.className="throbber-percent";f.appendChild(e);this.positions=h(d.width,this.style.throbber.lines)};Q.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),
this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,f=this.positions,e=this.style.throbberLine.color,g=this.style.throbberLine.width,h=this.style.throbber.roundTime;b.width=b.width;for(var j=0,k=f.length;j<k;j++){c.beginPath();c.strokeStyle=e;c.lineWidth=g;var o=j+1;c.globalAlpha=o==d?1:o==d+1||o==d-1?0.75:0.4;var m=f[j],o=m.from,m=m.to;c.moveTo(o.x,o.y);c.lineTo(m.x,m.y);c.stroke()}d==a?d=0:d++;this.highlightPos=
d;if(ha)b.className="throbber-canvas";else{var l=this;this._runId=setTimeout(function(){l._run.call(l)},Math.floor(h/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};D.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+$).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(y(b._$overlay,b._$content),ba||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",
b._resizeHandler);c.bind("resize",b._resizeHandler)},f=0,e=this._$target.length;f<e;f++){var g=this._$target.eq(f),h=this._$content.eq(f),j=this._$skin.eq(f),k=this._$overlay.eq(f),o=this._settings,m=q(g[0],"position");!this._isScreenLock&&"static"===m&&(g.data("before-position",m),g.data("before-zoom",q(g[0],"zoom")),g.css({position:"relative",zoom:"1"}));var m=K(g[0]),l=null;o.showThrobber&&(l=S?new Q(this._styles,m):H?new F(this._styles,m):null);l&&(b._throbbers.push(l),b.percent(this._settings.percent),
l.show(h.children(".indicator-throbber")[0]));g.append(j).append(k);this._showContent&&g.append(h)}f=this._$skin.toArray();Array.prototype.push.apply(f,this._$content.toArray());Array.prototype.push.apply(f,this._$overlay.toArray());f=a(f);0>c?(f.css("display","block"),d()):u(f,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&ba||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<d;c++){var f=this._$content.eq(c),e=
this._$overlay.eq(c);b=this._$target.eq(c);var g=this._$skin.eq(c);if(this._isScreenLock)f=ea(),b=ca();else{e.css("display","none");f.css("display","none");var h=b[0];a=h.scrollWidth;b=h.scrollHeight;if(M)a=Math.max(a,h.clientWidth),b=Math.max(b,h.clientHeight);else if(O.isIE&&"function"===typeof getComputedStyle){var h=ka(K(h)).getComputedStyle(h,null),j=parseFloat(h.width)+parseFloat(h.paddingLeft)+parseFloat(h.paddingRight);a+=j-parseInt(j)-1;h=parseFloat(h.height)+parseFloat(h.paddingTop)+parseFloat(h.paddingBottom);
b+=h-parseInt(h)-1}e.css("display","block");f.css("display","block");f=a}e[0].style.width=f+"px";e[0].style.height=b+"px";if(M||L)g[0].style.width=f+"px",g[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var g=this._$target.eq(c),h=this._$content.eq(c);if(this._isScreenLock){var j=V();ba?h.css("top",(j-p(h[0]))/2+"px"):h.css("top",Z()+j/2-p(h[0])/2+"px")}else h.css("top",g.scrollTop()+(d(g[0])-p(h[0]))/2);var j=f(h[0])-b(h[0]),k=0;h.children().each(function(){var b=
a(this);if("none"===q(b[0],"display"))return!0;k+=r(this,!0)});h.css("width",k+j);h.css("left",g.scrollLeft()+(f(g[0])-r(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var f=a(d),d=function(){var c=a(window);f.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),
zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},e=0,g=this._throbbers.length;e<g;e++)this._throbbers[e].hide();0>c?(f.css("display","none"),d()):I(f,c,d);return this},percent:function(a){if("number"!==
typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!w(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},
_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;ba||M||
L?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};g.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new D(b.target,b):new D(b,c)},isInView:function(b,c){var d,f,e,g,h=a(b);if(typeof c===oa)f=m("Height"),g=m("Width"),d=Z(),e=ia();else{g=a(c);if(0===g.find(h).length)return;e=s(g);d=e.top+parseInt(g.css("border-top-width"));e=e.left+parseInt(g.css("border-left-width"));f=g.innerHeight();g=g.innerWidth()}f=d+f;g=e+g;var j=s(h),k=j.top,j=j.left,o=k+h.outerHeight(),
h=j+h.outerWidth();return(d<=k&&k<f||d<o&&o<=f)&&(e<=j&&j<g||e<h&&h<=g)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,W))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,W)}})})();(function(){function c(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return w(b)&&0<b.length?b:null}function e(){var b=c();null!==b&&a(function(){m.addCSS(b);m.bindController(b)})}function h(a,b){for(var c in y)for(var e=y[c],g=a===c,h=0,
j=e.length;h<j;h++){var k=e[h];if(g)k[(b?"enable":"disable")+"Listeners"]()}for(c in B){e=B[c];g=a===c;h=0;for(j=e.length;h<j;h++)if(k=e[h],g)k[(b?"enable":"disable")+"Listeners"]()}}function j(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),e=b.split("."),g=c.length,h=0;h<g;h++){if(null==e[h])return 1;var j=parseInt(c[h],10),k=parseInt(e[h],10);if(j!==k)return j<k?-1:1}return null!=e[g]?-1:0}var C,m=null,s={},y={},B={},A={},q={},k=!1,b=!1,p=!1;
g.u.obj.ns("h5.ui.jqm");g.ui.jqm.dataPrefix="h5";var r={__name:"JQMController",__ready:function(){var b=this,f=c();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var e=this.$find("#"+f);e.one("h5controllerready.emulatepageshow",function(){p&&e[0]===a.mobile.activePage[0]&&e.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){C||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){C&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});b=!0;var c=c.event.target.id,f=y[c],e=B[c];if(f){for(var g=0,h=f.length;g<h;g++)f[g].dispose();y[c]=[]}if(e){g=0;for(h=e.length;g<h;g++)e[g].dispose();B[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);h(a,!0)},"{rootElement} pagehide":function(c){b||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});b=!1;c=c.event.target.id;h(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(b){var c=!1,e=a(b.event.target),g=b.evArg?b.evArg.prevPage:a("");if(b=y[e[0].id])for(var h=0,j=b.length;h<j;h++)if(!b[h].isReady){e.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===e[0]&&e.trigger("h5jqmpageshow",{prevPage:g})});c=!0;break}c||e.trigger("h5jqmpageshow",{prevPage:g})},
"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var f=c();null!==f&&-1===a.inArray(b,y[f])&&(B[f]||(B[f]=[]),B[f].push(b))}},"{rootElement} h5controllerunbound":function(b){var f=b.evArg,b=c();null!==b&&(f=a.inArray(f,B[b]),-1!==f&&B[b].splice(f,1))},loadScript:function(b){var b=a("#"+b),c=a.trim(b.data(this.getDataAttribute("script")));if(0!==c.length)return c=a.map(c.split(","),function(b){return a.trim(b)}),b=!0==b.data(this.getDataAttribute("async")),g.u.loadScript(c,{async:b})},
getDataAttribute:function(a){var b=g.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=s[a],c=A[a];if(b&&0!==b.length){y[a]||(y[a]=[]);for(var e=y[a],h=0,j=b.length;h<j;h++){for(var k=b[h],m=!1,l=0,p=e.length;l<p;l++){var r=e[l];if(r&&r.__name===k.__name){m=!0;break}}m||y[a].push(g.core.controller("#"+a,k,c[h]))}}},addCSS:function(b){if(b=q[b])for(var c=document.getElementsByTagName("head")[0],e=c.getElementsByTagName("link"),g=e.length,h=0,j=b.length;h<
j;h++){for(var k=a.mobile.path.parseUrl(b[h]).filename,m=!1,l=0;l<g;l++)if(a.mobile.path.parseUrl(e[l].href).filename===k){m=!0;break}m||(k=document.createElement("link"),k.type="text/css",k.rel="stylesheet",k.href=b[h],c.appendChild(k))}},removeCSS:function(b){var f=q[b];if(f&&(b=c(),null!==b)){var e=q[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,f)&&-1===a.inArray(b,e)}).remove()}}};g.u.obj.expose("h5.ui.jqm.manager",{init:function(){k||(k=!0,C=0<=j(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){p=!0}),a(function(){m=sa.controllerInternal("body",r,null,{managed:!1});e()}))},define:function(b,f,g,h){w(b)||l(12E3,"id");null!=f&&!w(f)&&!E(f)&&l(12E3,"cssSrc");null!=g&&((w(g)||E(g))&&l(12001),(!a.isPlainObject(g)||!("__name"in g))&&l(12E3,"controllerDefObject"),null!=h&&!a.isPlainObject(h)&&l(12E3,"initParam"));q[b]||(q[b]=[]);s[b]||(s[b]=[]);A[b]||(A[b]=[]);a.merge(q[b],a.map(a.makeArray(f),function(c){return a.inArray(c,q[b])!==-1?null:c}));g&&-1===
a.inArray(g,s[b])&&(s[b].push(g),A[b].push(h));k&&null!==c()?e():this.init()}})})();(function(){var c={required:"{displayName}は必須項目です",min:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.min}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以上の":"より大きい")},max:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.max}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{violation[0].ruleValue.regexp}を満たす文字列を入力してください。",
digits:"{displayName}は整数部分{violation[0].ruleValue.integer}桁、小数部分{fruction}桁以下の数値を入力してください。",size:"{displayName}は{violation[0].ruleValue.min}以上{violation[0].ruleValue.max}以下の長さでなければいけません。",future:"{displayName}は現在時刻より未来の時刻を入力してください。",past:"{displayName}は現在時刻より過去の時刻を入力してください。",nul:"{displayName}はnullでなければなりません。",notNull:"{displayName}はnullでない値を設定してください。",assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません"};qa={createValidateErrorMessage:function(e,
h,j){var l=j&&j.message,j=a.extend({},h,{displayName:j&&j.displayName||e});if(w(l))return g.u.str.format(l,j);if(G(l))return l(j);var l=h.violation[0].ruleName,m=c[l];return m?G(m)?m(j):g.u.str.format(m,j):g.u.str.format("{0}:{1}はルール{2}を満たしません",e,h.value,l)}};g.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},setContainer:function(a){this._container=a},setWrapper:function(a){this._wrapper=a},addMessageSetting:function(a){if(this._setting)for(var c in a)this._setting[c]=
a[c];else this._setting=a},clearMessage:function(){this._container&&a(this._container).empty()},appendMessage:function(c){var h=a(this._container);if(h.length){var j=this._wrapper;j?g.u.str.startsWith(a.trim(j),"<")?(msgElement=a(j),msgElement.text(c)):msgElement=a(document.createElement(j)).html(c):msgElement=document.createTextNode(c);h.append(msgElement)}},getMessageByValidationResult:function(a,c){var g=a.invalidReason[c];return!g?null:qa.createValidateErrorMessage(c,g,this._setting[c])},appendMessageByValidationResult:function(c,
g){for(var j=c.invalidProperties,g=w(g)?[g]:g,l=0,m=j.length;l<m;l++){var s=j[l];g&&-1===a.inArray(s,g)||this.appendMessage(this.getMessageByValidationResult(c,s))}null===c.isAllValid&&c.addEventListener("validate",this.own(function(c){(!c.isValid&&!g||-1!==a.inArray(c.name,g))&&this.appendMessage(qa.createValidateErrorMessage(c.name,c.target.invalidReason[c.name],this._setting[c.name]))}))}})})();(function(){g.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_setSetting:function(a){this._setting=
a},_onValidate:function(a){for(var e=a.properties,g=0,j=e.length;g<j;g++){var l=e[g];this._setStyle(this.parentController._getElementByName(l),l,a)}},_onFocus:function(a,e,g){this._setStyle(a,e,g)},_onKeyup:function(a,e,g){this._setStyle(a,e,g)},reset:function(){for(var c in this._styleAppliedElements){var e=this._styleAppliedElements[c],g=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);this._setValidateState(null,e,g,c)}},_setStyle:function(c,e,g){var j=a.extend({},this._setting,
this._setting.property&&this._setting.property[e]);if(!j.off){var l=j.replaceElement;if(c=G(l)?l(c):l||c)-1!==a.inArray(e,g.validatingProperties)?(this._setValidateState("validating",c,j),g.addEventListener("validate",this.own(function(a){a.name===e&&this._setValidateState(a.isValid?"success":"error",c,j,e)}))):this._setValidateState(-1===a.inArray(e,g.invalidProperties)?"success":"error",c,j,e)}},_setValidateState:function(c,e,g,j){var l=g.errorClassName,m=g.successClassName,s=g.validatingClassName;
a(e).removeClass(l).removeClass(m).removeClass(s);c&&(c=g[c+"ClassName"],a(e).addClass(c),this._styleAppliedElements[j]=e)}})})();(function(){g.core.expose({__name:"h5.ui.validation.Composition",_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._messageOutputController.clearMessage();this._messageOutputController.appendMessageByValidationResult(a)},
reset:function(){this._messageOutputController.clearMessage()},_setChildSetting:function(){var a=this._setting;this._messageOutputController.setContainer(a.container);this._messageOutputController.setWrapper(a.wrapper);var e=a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.ErrorBaloon",_executedOnValidate:!1,
_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(){this._executedOnValidate=!0},_onFocus:function(a,e,g){this._setErrorBaloon(a,e,g,"focus")},_onBlur:function(a,e,g){this._setErrorBaloon(a,e,g,"blur")},_onKeyup:function(a,e,g){this._setErrorBaloon(a,e,g,"keyup")},reset:function(){this._hideBaloon();this._executedOnValidate=
!1},_setErrorBaloon:function(c,e,g,j){if(this._executedOnValidate){var l=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!l.off){var m=l.replaceElement,s=G(m)?m(c):m||c;if(s)if("blur"===j||c!==document.activeElement&&!a(document.activeElement).closest(c).length)this._hideBaloon();else{var y=l.placement||"top",w=l.container||null;-1!==a.inArray(e,g.validatingProperties)?g.addEventListener("validate",this.own(function(a){c===document.activeElement&&(a.isValid?this._hideBaloon():
this._showBaloon(s,y,w,this._messageOutputController.getMessageByValidationResult(g,a.name)))})):!g.invalidReason||!g.invalidReason[e]?this._hideBaloon():this._showBaloon(s,y,w,this._messageOutputController.getMessageByValidationResult(g,e))}}}},_showBaloon:function(a,e,h,j){this._hideBaloon();if(this._baloonController){var l=this._baloonController.create(j);l.show({target:a,direction:e});this._currentBaloon=l;this._currentBaloonTarget=a}else{var m=g.core.controller(this.rootElement,g.ui.components.BaloonController);
this.manageChild(m);m.readyPromise.done(this.own(function(){this._baloonController=m;this._showBaloon(a,e,h,j)}))}},_hideBaloon:function(){this._currentBaloon&&(this._currentBaloon.dispose(),this._currentBaloon=null);this._currentBaloonTarget=null},_setChildSetting:function(){var a=this._setting,e=a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();
(function(){var c={__name:"h5.ui.validation.BootstrapErrorBaloon",_hideBaloon:function(){a(this._currentBaloonTarget).tooltip("hide")},_showBaloon:function(c,g,j,l){a(c).attr({"data-placement":g,"data-container":j,"data-original-title":l,"data-animation":!1}).tooltip({trigger:"manual"});a(c).tooltip("show");this._currentBaloonTarget=c}},c=a.extend({},g.ui.validation.ErrorBaloon,c);g.core.expose(c)})();(function(){g.core.expose({__name:"h5.ui.validation.Message",_executedOnValidate:!1,_messageElementMap:{},
_messageOutputController:g.ui.validation.MessageOutputController,_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._executedOnValidate=!0;for(var e=a.validProperties,g=0,j=e.length;g<j;g++){var l=e[g];this._setMessage(this.parentController._getElementByName(l),l,a)}},_onFocus:function(a,e,g){this._setMessage(a,e,g,"focus")},_onBlur:function(a,e,g){this._setMessage(a,e,g,"blur")},reset:function(){for(var a in this._messageElementMap){var e=
this._messageElementMap[name];e&&e.remove()}this._executedOnValidate=!1},_setMessage:function(c,e,g,j){if(this._executedOnValidate){var l=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!l.off)if("blur"===j)this._removeMessage(e);else if(-1!==a.inArray(e,g.validatingProperties))this._removeMessage(e),g.addEventListener("validate",this.own(function(a){a.name===e&&!a.isValid&&("focus"!==j||document.activeElement===c)&&this._setMessage(c,e,g,j)}));else{this._removeMessage(e);
var m=l.appendMessage,l=l.replaceElement,l=G(l)?l(c):l||c,s=this._messageElementMap[e];s||(s=a('<span class="message">'),this._messageElementMap[e]=s);s.html(this._messageOutputController.getMessageByValidationResult(g,e));m?m(s[0],l,e):l&&a(l).after(s)}}},_removeMessage:function(a){this._messageElementMap[a]&&this._messageElementMap[a].remove()},_setChildSetting:function(){var a=this._setting,e=a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,
formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_setSetting:function(a){this._setting=a},_onValidate:function(c){for(var e=c.validatingProperties,c=c.properties,g=0,j=c.length;g<j;g++){var l=c[g];a.inArray(l,valdatingProperties)?this._showIndicator(this.parentController._getElementByName(l),l,e[g]):this._hideIndicator(l)}},_onFocus:function(c,e){var g=result.validatingProperties;
a.inArray(e,g)?(c=this.parentController._getElementByName(e),this._showIndicator(c,e,g[i])):this._hideIndicator(e)},_onKeyup:function(c,e,g){-1!==a.inArray(e,g.validatingProperties)&&this._showIndicator(c,e,g)},reset:function(){for(var a in this._indicators)this._hideIndicator(a);this._executedOnValidate=!1},_showIndicator:function(c,e,h){var j=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!j.off&&(j=j.replaceElement,c=G(j)?j(c):j||c))this._indicators[e]=this._indicators[e]||
g.ui.indicator({target:c,block:!1}),this._indicators[e].show(),h.addEventListener("validate",this.own(function(a){e===a.name&&this._hideIndicator(a.name)})),h.addEventListener("abort",this.own(function(){this._hideIndicator(e)}))},_hideIndicator:function(a){this._indicators[a]&&this._indicators[a].hide()}})})();(function(){var c={style:g.ui.validation.Style,composition:g.ui.validation.Composition,baloon:g.ui.validation.ErrorBaloon,bsBaloon:g.ui.validation.BootstrapErrorBaloon,message:g.ui.validation.Message,
asyncIndicator:g.ui.validation.AsyncIndicator},e=function(b){if(null!=a(b).data("required"))return!0},h=function(b){if(null!=a(b).data("assertFalse"))return!0},j=function(b){if(null!=a(b).data("assertTrue"))return!0},l=function(b){if(null!=a(b).data("nul"))return!0},m=function(b){if(null!=a(b).data("notNull"))return!0},s=function(b){b=a(b).data("max");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},y=function(b){b=a(b).data("min");if(null!=b)return"number"===
typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},w=function(b){b=a(b).data("future");if(null!=b)return new Date(b)},A=function(b){b=a(b).data("past");if(null!=b)return new Date(b)},q=function(b){b=a(b).data("pattern");if(null!=b)return RegExp(b)},k=function(b){b=a(b).data("size");if(null!=b){if(E(b)){for(var c=0,e=b.length;c<e;c++)b[c]=parseInt(b[c]);return b}return parseInt(b)}};g.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],
_validationLogic:g.validation.FormValidationLogic,_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;var a=this._plugins,c;for(c in a){var e=a[c];e._setSetting&&e._setSetting(this._margePluginSettings(c))}},_margePluginSettings:function(b){this._pluginSetting;var c=this._setting,e=c.output,c=c.property,e=a.extend({},e&&e[b]);e.property={};for(var d in c){var f=a.extend({},c[d]);a.extend(f,f[b]);var h=g.u.obj.getByPath("output."+
b,f);delete f.output;e.property[d]=a.extend({},f,h)}return e},__construct:function(){this._addRuleCreator("required",e);this._addRuleCreator("assertFalse",h);this._addRuleCreator("assertTrue",j);this._addRuleCreator("nul",l);this._addRuleCreator("notNull",m);this._addRuleCreator("max",s);this._addRuleCreator("min",y);this._addRuleCreator("future",w);this._addRuleCreator("past",A);this._addRuleCreator("pattern",q);this._addRuleCreator("size",k)},__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&
(this._bindedForm=this.rootElement,a(this._bindedForm).prop("novalidate",!0));var b={};a(this._getElements()).each(this.ownWithOrg(function(a){var c=a.getAttribute("name");if(c!=null){var d={};b[c]=d;for(var c=0,f=this._ruleCreators.length;c<f;c++){var e=this._ruleCreators[c].key,g=this._ruleCreators[c].func,g=g(a);g!==void 0&&(d[e]=g)}}}));this.addRule(b);if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},addOutput:function(b){if(this.isInit)for(var b=a.isArray(b)?b:[b],
e=0,g=b.length;e<g;e++){var d=b[e],f=c[d];f?this._addOutputPlugin(d,f):this.log.warn('プラグイン"{0}"は存在しません',d)}else this.initPromise.done(this.own(function(){this.addOutput(b)}))},addRule:function(a){this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule();this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(b){var b=b&&(!E(b)?[b]:b),c=a(this._getElements()),e=a(this._getInputGroupElements()),
d=this._setting&&this._setting.property||{},f={},g=[],h=this.rootElement;c.each(function(){var c=this.name;g.push(c);var j=f;if(e.find(this).length)var k=a(this).closest("[data-h5-input-group-container]").data("h5-input-group-container");if(k){g.push(k);if(b&&-1===a.inArray(c,b)&&-1===a.inArray(k,b))return;f[k]=f[k]||{};j=f[k]}else if(b&&-1===a.inArray(c,b))return;if("file"===this.type){var k=this.files,l=k.length;if(l){j[c]=j[c]||[];for(var m=0;m<l;m++)j[c].push(k[m])}}else if(c&&!(("radio"===this.type||
"checkbox"===this.type)&&!1===this.checked))l=(k=d[c]&&d[c].valueFunc)?k(h,c):a(this).val(),k&&void 0===l||null==l||(d[c]&&d[c].isArray&&(l=J(l)),void 0!==j[c]?(a.isArray(j[c])||(j[c]=[j[c]]),a.isArray(l)?Array.prototype.push.apply(j[c],l):j[c].push(l)):j[c]=l)});for(var j in d)if((!b||-1!==a.inArray(j,b))&&-1===a.inArray(j,g))c=(c=d[j]&&d[j].valueFunc)&&c(h,j),void 0!==c&&(f[j]=c);return f},setValue:function(b){var c=a(this._getElements()),e={},d={},f;for(f in b)if(a.isPlainObject(b[f]))for(var g in b[f])d[g]=
b[f][g];else d[f]=b[f];b=d;c.each(function(){var c=this.name;if(c){var d=b[c];if("radio"===this.type||"checkbox"===this.type)a.isArray(d)&&(e[c]=e[c]?e[c]+1:0,d=d[e[c]]),a(this).prop("checked",a(this).val()===d);else if(a(this).is("select[multiple]")){if(a(this).val([]),a.isArray(d)&&(e[c]=e[c]||0,d=d.slice(e[c])),null!=d)for(var f=[],g=0,h=d.length;g<h;g++){f.push(d[g]);a(this).val(f);e[c]++;var j=a(this).val(),j=a.isArray(j)?j:[j];if(j.length<f.length){e[c]--;break}}}else a.isArray(d)&&(e[c]=e[c]||
0,d=d[e[c]++]),a(this).val(d)}})},clearValue:function(){a(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?a(this).prop("checked",!1):a(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._waitingValidationResultMap={};var a=this._plugins,c;for(c in a)this._resetPlugin(c,a[c])},validate:function(a){a=this._validate(a);this._callPluginValidateEvent("_onValidate",a);return a},getOutput:function(a){return this._plugins[a]},
"{rootElement} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{rootElement} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{rootElement} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{rootElement} change":function(a){this._pluginElementEventHandler(a,"_onChange")},"{rootElement} click":function(a){this._pluginElementEventHandler(a,"_onClick")},_getElementByName:function(b){var c=this._setting.property&&this._setting.property[b]&&this._setting.property[b].srcElement;
return c||(c=a(this._getElements()).filter('[name="'+b+'"]')[0])?c:(b=a(this._getInputGroupElements()).filter('[data-h5-input-group-container="'+b+'"]')[0])?b:null},_getElements:function(){var b=this.$find("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]');if(!this._bindedForm)return b;var c=a(this._bindedForm).attr("id");return a("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]').filter(function(){var e=a(this),d=e.attr("form");return d&&d===
c||!d&&-1!==b.index(e)}).toArray()},_getInputGroupElements:function(){var b=a("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=a(this),e=c.attr("form");return e&&e===formId||!e&&-1!==b.index(c)}).toArray()},_addRuleCreator:function(a,c){this._ruleCreators.push({key:a,func:c})},_resetPlugin:function(a,c){c.reset&&c.reset.call(c)},_addOutputPlugin:function(a,c){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var e=g.core.controller(this._bindedForm||
this.rootElement,c,{setting:this._margePluginSettings(a)});this.manageChild(e);this._plugins[a]=e}},_validate:function(a){var c=this.getValue(a),e=this._validationLogic.validate(c,a);this.log.debug("-----------------------------------------");this.log.debug("・validateするデータ");this.log.debug(c);this.log.debug("・validate対象のプロパティ:"+a);this.log.debug("・validate結果");this.log.debug(e);this.log.debug(e.isAsync?"非同期":"同期");this.log.debug("-----------------------------------------");if(e.isAsync){for(var a=
e.validatingProperties,c=0,d=a.length;c<d;c++)this._waitingValidationResultMap[a[c]]=e;e.addEventListener("validate",this.own(function(a){delete this._waitingValidationResultMap[a.name]}))}return e},_createPluginElementEventArgs:function(){},_pluginElementEventHandler:function(b,c){var e=b.event.target;if(this._isFormControls(e)){var d=e.name;if(d){var f;a(this._getInputGroupElements()).find(e).length&&(f=a(e).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var g=this._validate(f||
d);this._callPluginElementEvent(c,e,d,g);f&&(e=this._getElementByName(f),this._callPluginElementEvent(c,e,f,g))}}},_callPluginValidateEvent:function(a,c){var e=this._plugins,d;for(d in e){var f=e[d];f[a]&&f[a].call(f,c)}},_callPluginElementEvent:function(a,c,e,d){var f=this._plugins,g;for(g in f){var h=f[g];if(h[a])h[a](c,e,d)}},_submitHandler:function(a,c){a.event.preventDefault();var e=this.validate();e.isAsync?e.addEventListener("validateComplete",function(){this.isAllValid&&c[0].submit()}):e.isAllValid&&
c[0].submit()},_isFormControls:function(b){return-1!==a(this._getElements()).index(b)}})})();(function(){function c(){j||(j=navigator.geolocation);return j}function e(a,c){this.oblateness=a;this.semiMajorAxis=c}function h(){}var j=null,w=g.env.ua;e.prototype.getOblateness=function(){return this.oblateness};e.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var m=new e(298.257222,6378137),s=new e(299.152813,6377397.155),y=Math.PI/180;a.extend(h.prototype,{isSupported:w.isIE&&9<=w.browserVersion?
!0:!!c(),getCurrentPosition:function(a){var e=g.async.deferred();c().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(ca(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var h=g.async.deferred(),j=c().watchPosition(function(a){h.notify(a)},function(a){c().clearWatch(j);h.reject(ca(2002,null,a))},a);e.prototype.unwatch=function(){c().clearWatch(j);h.resolve()};return h.promise(new e)},getDistance:function(a,c,g,h,b){(!isFinite(a)||!isFinite(c)||!isFinite(g)||
!isFinite(h))&&l(2E3);var j=b?b:m;j instanceof e||l(2001);var b=j.getSemiMajorAxis(),r=j.getOblateness(),a=a*y,c=c*y,g=g*y,j=h*y,h=(a+g)/2,r=Math.sqrt(2*r-1)/r,r=Math.pow(r,2),d=Math.sqrt(1-r*Math.pow(Math.sin(h),2)),r=b*(1-r)/Math.pow(d,3),b=b/d,c=c-j;return Math.sqrt(Math.pow(r*(a-g),2)+Math.pow(b*Math.cos(h)*c,2))},GS_GRS80:m,GS_BESSEL:s});g.u.obj.expose("h5.api",{geo:new h})})();(function(){function c(a){if(a){var b=a.deferred;(ya(b)||va(b)||!a.result)&&l(k)}}function e(c,d,e){if(a.isPlainObject(c))for(var g in c){var h=
a.trim(g).replace(/ +/g," ").split(" "),j=[];""===h[0]?l(p):1===h.length?(j.push(h[0]),j.push("="),j.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(h[1])?3===h.length&&/^like$/i.test(h[1])?(j.push(h[0]),j.push(h[1]),j.push("?"),j.push("ESCAPE"),j.push('"'+h[2]+'"')):(j.push(h[0]),j.push(h[1]),j.push("?")):l(b);d.push(j.join(" "));e.push(c[g])}}function h(){}function j(){this._multiple=!1}function C(a){this._db=a;this._df=r();this._tx=null;this._tasks=[];this._queue=[]}function m(a,b,c){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=E(c)?c.join(", "):"*";this._orderBy=this._where=null}function s(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?J(c):[];this._df=r();this._multiple=!0}function y(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function B(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}
function A(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function q(a){this._db=a}var k=3E3,b=3003,p=3011,r=g.async.deferred,d=g.u.str.format;a.extend(j.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(C.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof j||l(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===g.length){var c=a(h);d._setResult.apply(d,[c]);e.notify(c,d)}else{for(var j=g.shift(),k=j._statements,l=j._parameters,m=r().resolve().promise(),c=[],p=0,q=k.length;p<q;p++)(function(a,b){m=ea(m,function(){var e=r();d._tx.executeSql(a,b,function(a,b){c.push(j._onComplete(b));
e.resolve()});return e.promise()})})(k[p],l[p]);ea(m,function(){h.push(j._multiple?c:c[0]);b()})}}var d=this,e=this._df,g=this._queue,h=[];try{c(this._getRecentTask());this._addTask(e);for(var j=0,k=g.length;j<k;j++)g[j]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){d._tx=a;b()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(ca(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,
b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(l){e.reject(l)}this._df=r();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});m.prototype=new j;a.extend(m.prototype,{where:function(b){!a.isPlainObject(b)&&!w(b)&&l(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!w(b)&&l(3004,["Select","orderBy"]);this._orderBy=J(b);return this},_buildStatementAndParameters:function(){var b=
"",c=this._where,b=d("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var g=[];e(c,g,this._parameters);b+=" WHERE "+g.join(" AND ")}else w(c)&&(b+=" WHERE "+c);E(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});s.prototype=new j;a.extend(s.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,e=this._parameters;if(0===b.length)c.push(d("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),e.push([]);else for(var g=0,h=b.length;g<h;g++){var j=b[g];if(null==j)c.push(d("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(a.isPlainObject(j)){var k=[],l=[],m=[],p;for(p in j)k.push("?"),l.push(p),m.push(j[p]);c.push(d("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,l.join(", "),k.join(", ")));e.push(m)}}},_onComplete:function(a){return a.insertId}});y.prototype=new j;a.extend(y.prototype,{where:function(b){!a.isPlainObject(b)&&!w(b)&&l(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=this._values,g=[],h;for(h in b)g.push(h+" = ?"),this._parameters.push(b[h]);b=d("UPDATE {0} SET {1}",this._tableName,g.join(", "));a.isPlainObject(c)?(h=[],e(c,h,this._parameters),b+=" WHERE "+h.join(" AND ")):w(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});B.prototype=new j;a.extend(B.prototype,{where:function(b){!a.isPlainObject(b)&&
!w(b)&&l(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=d("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var g=[];e(c,g,this._parameters);b+=" WHERE "+g.join(" AND ")}else w(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});A.prototype=new j;a.extend(A.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(q.prototype,{select:function(a,b,c){w(a)||l(3001,"select");!E(b)&&"*"!==b&&l(3005,"select");return new m(this.transaction(c),a,b)},insert:function(b,c,d){w(b)||l(3001,"insert");null!=c&&!E(c)&&!a.isPlainObject(c)&&l(3006,"insert");return new s(this.transaction(d),b,c)},update:function(b,c,d){w(b)||l(3001,"update");a.isPlainObject(c)||l(3006,"update");return new y(this.transaction(d),b,c)},del:function(a,b){w(a)||l(3001,"del");return new B(this.transaction(b),a)},sql:function(a,b,c){w(a)||
l(3007,"sql");null!=b&&!E(b)&&l(3008,"sql");return new A(this.transaction(c),a,b)},transaction:function(a){void 0!=a&&!(a instanceof C)&&l(3002,"transaction");return a?a:new C(this._db)}});a.extend(h.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,d){if(this.isSupported)return a=openDatabase(a,b,c,d),new q(a)}});g.u.obj.expose("h5.api",{sqldb:new h})})();(function(){function c(a){this._storage=a}a.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:g.u.obj.deserialize(a)},setItem:function(a,c){this._storage.setItem(a,g.u.obj.serialize(c))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,g=0,l=c.length;g<l;g++){var m=c.key(g);a(g,m,this.getItem(m))}}});g.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})();(function(){var c,e,h,j;function C(a){for(var a=g.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)Ma(a[b])||a[b].dispose()}function m(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function s(b){b=a(b).closest("["+
M+"],["+ba+"]");return b.length?b.get(0):null}function y(b){b=a(b).closest("["+V+"],["+ha+"]");return b.length?b.get(0):null}function B(a,b){if(a===b)return!0;var c=y(a),d=b?y(b):null;return c!==d?!1:s(a)===b}function A(b,c,d){var e=b?b:document.body,b=a(e);if(0!==b.length){1!==b.length&&l(P);if(!la){var f=m(e,"["+V+"]");0===f.length&&(f=m(e,"main"),0===f.length&&e===document.body&&(f=a(e)),0<f.length&&f.eq(0).attr(V,V))}if(b.is("["+ha+"]"))fa(e);else if(b.is("["+V+"]"))fa(e,!0);else{var h=a(e).is("["+
M+"],["+ba+"]")&&!q(e),j=h?g.async.deferred():null,o=a(e).is("["+M+"],["+ba+"]")?e:s(e),r=!1;m(e,"["+H+"]").each(function(){for(var b=this.getAttribute(H).split(","),f=0,g=b.length;f<g;f++){var n=a.trim(b[f]);if(""===n||c&&n!==c)return!0;if(!q(this,n)){if(!B(this,o))return!0;var l=!1;h&&!r&&this===e&&(l=r=!0);k(this,n);n=p(n,this,l?d:null);l&&n.done(function(a){j.resolve(a)})}}});b.find("["+V+"],["+ha+"]").each(function(){if(B(this,o))return!0;var b=a(this);b.is("["+V+"]")?fa(this,!0):b.is("["+ha+
"]")&&fa(this)});if(h)return j.promise()}}}function q(b,c){var d=a(b).attr(L);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function k(b,c){var d=a(b).attr(L)||"";d&&(d+=",");a(b).attr(L,d+c)}function b(b,c,d){var e=b?b:document.body,f=g.async.deferred(),b=!1,h=null,j=a(e).find(">["+M+"]");0<j.length&&(h=j.eq(0),q(h)||(b=!0,h.is("["+H+"]")||(k(h,Da.__name),h=g.core.controller(h,Da,d),f.resolve(h))));b||(e=a(e).children().eq(0).filter("["+
ba+"]"),0<e.length&&!q(e)&&(b=!0,e.attr(M,M),j=e,e.is("["+H+"]")||(k(e,Da.__name),h=g.core.controller(e,Da,d),f.resolve(h))));b||l(ta);c=A(j.get(0),c,d);va(f)||c.done(function(a){f.resolve(a)});return f.promise()}function p(a,b,c){var d=g.async.deferred();g.res.get(a).then(function(a){a=g.core.controller(b,a,c);d.resolve(a)});return d.promise()}function r(a,b){this.type=a;this.data=b}function d(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};
a(window).on("message",this._recv)}function f(a,b){var c=Xa[a];c||(c=new d(a,b),Xa[a]=c);return c}function o(){this._recvChannel=new d(v,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new d(ja,window.opener)}function u(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=g.core.data.createSequence(1,1,g.core.data.SEQ_INT);this._sendChannel=f(v,a);this._recvChannel=f(ja,a);this._recvChannel.subscribe(this._receive,this)}function E(a){var a=
a||{},b;if(E._instance)b=E._instance;else{b=E._instance=this;var d=!!window.history.pushState;b.urlHistoryMode=a.urlHistoryMode||Q.HISTORY;switch(b.urlHistoryMode){case Q.HASH:b.urlHistoryActualMode=c;break;case Q.NONE:b.urlHistoryActualMode=e;break;case Q.FULLRELOAD:b.urlHistoryActualMode=h;break;case Q.HISTORY:case Q.HISTORY_OR_HASH:case Q.HISTORY_OR_ERROR:case Q.HISTORY_OR_NONE:case Q.HISTORY_OR_FULLRELOAD:d&&(b.urlHistoryActualMode=j)}if(!b.urlHistoryActualMode&&!d)switch(b.urlHistoryMode){case Q.HISTORY_OR_ERROR:l(xa);
return;case Q.HISTORY:case Q.HISTORY_OR_HASH:b.urlHistoryActualMode=c;break;case Q.HISTORY_OR_NONE:b.urlHistoryActualMode=e;break;case Q.HISTORY_OR_FULLRELOAD:b.urlHistoryActualMode=h}b.urlHistoryActualMode||l(za,b.urlHistoryMode);a.baseUrl&&(d=new F(a.baseUrl),b._baseUrl=d.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));b._urlMaxLength=a.urlMaxLength||URL_MAX_LENGTH;var f=b._onChange;b._onChange=function(){return f.apply(b,arguments)}}a.routes&&(b._routes=b._routes.concat(a.routes));return b}function F(a){null!=
a&&(a=a.match(F.regExp),this.href=a[0]||"",this.protocol=a[1]||"",this.host=a[2]||"",this.hostname=a[3]||"",this.port=a[4]||"",this.pathname=a[5]||"",this.dir=a[6]||"",this.file=a[7]||"",this.search=a[8]||"",this.hash=a[9]||"")}function D(a){this.__controller=a}function K(){}function Z(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new u(a);this._watchChild()}function ca(b){b=a(b);if(!1===b.children().eq(0).is("["+M+"],["+
ba+"]")){b.wrapInner(a("<div "+M+"></div>"));var c=b.attr(H);c&&b.removeAttr(H).children().attr(H,c)}}function N(b,c,d){var e=g.async.deferred();g.ajax({url:b,dataType:"html",method:c||"get",data:d}).done(function(b){var c=b.replace(kb,"").match(Ya),b=c?"<div "+oa+" "+c[1]+">"+c[2]+"</div>":b;cb.test(b)&&(b="<div "+ha+">"+b+"</div>");b=a(b);c=m(b,"["+V+"]");0===c.length&&(c=m(b,"main"));0<c.length&&(b=c.eq(0),b.attr(V,V));if(1<b.length||!a(b).is("["+V+"],["+ha+"]")&&!b.is("["+oa+"]"))b=a("<div "+
ha+"></div>").append(b);ca(b);e.resolve(b.children())}).fail(function(a){e.reject(a)});return e}function ea(b,c,d){w(b)?c=N(b,c,d):(c=g.async.deferred(),b=null==b?a(ab).get(0):g.u.obj.isJQueryObject(b)?b[0]:b,c.resolve(b));return c.promise()}function T(){}function ka(b,c){var d="";a.each(b,function(a,b){d&&(d+="&");if(!c&&("args"===a||"serverArgs"===a))d+=ka(b,a);else if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var f="",h=0;h<b.length;h++)f&&(f+="&"),f+=e+"[]",f+="=",
f+=encodeURIComponent(b[h]);d+=f}else d+=e,d+="=",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(Na+a):d+encodeURIComponent(Oa+a),d+="=",d+=encodeURIComponent(g.u.obj.serialize(b).substring(2))});return d}function W(b){W._checkKeyRegExp||(W._checkKeyRegExp=RegExp("^("+Ta+"|"+Pa+")?(.+)"),W._checkArrayRegExp=/^(.*)\[\]$/);var c={},d=W._checkKeyRegExp,e=W._checkArrayRegExp;a.each(b.split("&"),function(a,b){var b=b.split("="),f=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),j=f.match(d);
if(j){f=j[1]||"";j=j[2];if(!f){c.serverArgs=c.serverArgs||{};var n=j.match(e);if(n){n=n[1];n in c.serverArgs===false&&(c.serverArgs[n]=[]);c.serverArgs[n]instanceof Array&&c.serverArgs[n].push(h)}else c.serverArgs[j]=h}if(f===Na){c.args=c.args||{};c.args[j]=g.u.obj.deserialize(qa+h)}else f===Oa&&(c[j]=g.u.obj.deserialize(qa+h))}});return c}function U(a){if(!a)return"";U._regExp||(U._regExp=RegExp("(^|&)(?:"+Ta+"|"+Pa+")[^=]*=.*?(?=&|$)","g"));var b=U._regExp,c=new F(a),a=c.pathname,c=c.search||"";
(c=c.substring(1).replace(b,""))&&(c="?"+c);return a+c}function O(a){var b=new F(a),a=b.pathname||"",b=W((b.search||"").substring(1));b.to||(b.to=a);return b}function X(b){var b=a.extend(!0,{},b),c=b.to,d="",e="";R.test(c)||(delete b.to,c=U(c),e=new F(c),d=e.pathname,e=e.search);(b=ka(b))&&(e=e+(e?"&":"?")+b);return d+e}function fa(b,c){null==b&&(b=a("<div></div>").get(0));a(b).is("["+ma+"]")&&l(wa);var d=c;c?a(b).is(":not(["+V+"])")&&a(b).attr(V,V):(a(b).is(":not(["+ha+"])")&&a(b).attr(ha,ha),d=
g.settings.scene.followTitle);d=sa.controllerInternal(b,Fa,{isMain:c,followTitle:d},{async:!1});a(b).attr(ma,ma);return d}function ga(){Ga||(Ga=!0,A())}function S(a,b){return g.core.controllerManager.getControllers(a||document.body,{name:Fa.__name,deep:b&&!1===b.deep?!1:!0})}var H="data-h5-controller",L="data-h5-dyn-controller-bound",M="data-h5-default-scene",ba="data-h5-scene",ha="data-h5-scene-container",V="data-h5-main-scene-container",ma="data-h5-dyn-container-bound",oa="data-h5-dyn-dummy-body",
qa="2|",ia={NORMAL:"normal",ONCE:"once",SILENT:"silent"},pa={GET:"get",POST:"post"},Q={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"};c="hash";j="history";e="none";h="fullreload";var v="__h5__RMI",ja="__h5__RMI_Result",P=1E5,ta=100001,wa=100007,xa=100011,za=100012,Ma=sa.isDisposing,Ga=!1,Na=g.settings.scene.clientQueryStringPrefix,Oa=g.settings.scene.clientFWQueryStringPrefix,
Ta=null,Pa=null,ya=g.settings.scene.urlHistoryMode,Ha=null,R=/Controller$/,Y=null,na=null,Ia=null,Ja=null,Da={__name:"h5.scene.DummyController"};g.mixin.eventDispatcher.mix(d.prototype);a.extend(d.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new r(this.type,a),this._targetWindow.postMessage(g.u.obj.serialize(a),location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},
_receiveMessage:function(a){var b;try{if(b=g.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}for(var a=this._subscribers,d=0,e=a.length;d<e;d++){var f=a[d];f.func.call(f.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var Xa={};a.extend(o.prototype,{_receive:function(a){var b=g.core.controllerManager.getControllers(document.body)[0],c=a.id,d=a.method,a=a.args;!b[d]||G(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},
_callFunction:function(a,b,c,d){var d=J(d),e=void 0;try{e=b[c].apply(b,d)}catch(f){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;g.async.isPromise(e)?e.done(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});a.extend(u.prototype,{invoke:function(a,
b){var c=g.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});a.extend(E.prototype,{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,
_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(w(f.test)){if(c===f.test){d=f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===
typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(b){b=b||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,(!b||!b.silent)&&this._onChange(),this.urlHistoryActualMode){case c:a(window).on("hashchange",this._onChange);break;case j:a(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};if(this._started){this._checkUrlLength(a,{throwOnError:!0});var d=!1,f=this.urlHistoryActualMode;switch(b.mode){case "silent":d=
!0;break;case "none":f=e;break;case "fullreload":f=h}var g=this._toAbusolute(a);switch(f){case c:d&&(this._silentOnce=!0);this.compareUrl(g)?this._onChange():b.replaceHistory?location.replace("#"+g):location.hash=g;break;case j:d&&(this._silentOnce=!0);this.compareUrl(g)||(b.replaceHistory?history.replaceState(null,null,g):history.pushState(null,null,g));this._onChange();break;case h:this.compareUrl(g)?location.reload():b.replaceHistory?location.replace(g):location.href=g;break;case e:this.evaluate(g)}}},
stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case c:a(window).off("hashchange",this._onChange);break;case j:a(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new F(a)).protocol)return a.length<=this._urlMaxLength;var d=this._toAbusolute(a);this.urlHistoryActualMode===c&&(d=window.location.pathname+(window.location.search||"")+"#"+d);d=aa(d);b.writeBack&&(b.url=d,b.urlLength=d.length,b.urlMaxLength=
this._urlMaxLength);return d.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){var b=null,a=new F(a),b=this._getRouterLocation();a.isSearch()?b=b.pathname+a.search+a.hash:a.isHash()?b=b.pathname+b.search+
a.hash:(b=a.pathname+a.search+a.hash,0!==b.indexOf("/")&&(b=this._getBaseDir()+b));b=aa(b);a=new F(b);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b)var c=this._getRouterLocation(),b=c.pathname+c.search;0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===c&&location.hash?new F(location.hash.substring(1)):new F(location.href)}});a.extend(F.prototype,{href:void 0,
protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});F.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&new o;a.extend(D.prototype,{navigate:function(a){Ma(this.__controller)||this.__controller.trigger("sceneChangeRequest",
a)},getParentContainer:function(){if(Ma(this.__controller))return null;var a=y(this.__controller.rootElement);return!a?null:S(a)[0]}});a.extend(Z.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new K},setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=g.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=
g.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var kb=/<\!--(?:\s|\S)*?--\>/g,Ya=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,cb=/^\s*(?!\s|<)/,ab='<div class="h5-scene"></div>';a.extend(T.prototype,{onChange:function(b,c){var d=g.async.deferred();a(b).empty();a(c).appendTo(b);d.resolve();return d.promise()},onChangeStart:function(a){this._ind=g.ui.indicator({target:a,
block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});var la=null,db={__name:"h5.scene.NotReshowableController",__init:function(b){b=b.args._notReshowableMessage;a(this.rootElement).html("<h1>"+b+"</h1>")}},Fa={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(c){var c=c.args||{},d=this.rootElement,e=c.isMain,f=this;this.isMain=
!!e;this.followTitle=e&&c.followTitle;this.isMain&&la&&l(100003);this._containerName=a(d).attr(V)||a(d).attr(ha);this._currentController=null;ca(d);this._transition=new T;this._transition.onChangeStart(d);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));this._router=Ja;if(this.isMain){la=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));Ha=this._router.urlHistoryActualMode;this._router.start()}else b(d).done(function(a){f._currentController=
a;f._transition.onChangeEnd(f.rootElement,null,a.rootElement);f._transition=null})},__dispose:function(){Ma(this._currentController)||this._currentController.dispose();this._currentController=null;this.isMain&&(this._router.stop(),this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(b){if(w(b))return this.navigate({to:b});
this._navigateParam=b;b=a.extend(!0,{},b);this._transition=new T;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=g.async.deferred();this._isNavigated=!0;var d=b.to;if(this.isMain&&b.navigationType!==ia.SILENT){w(d)||l(100004,[d]);-1!==d.indexOf("#")&&l(100005,[d]);b.method===pa.POST&&(this._detour.serverArgs=b.serverArgs,delete b.serverArgs);if(b.navigationType===ia.ONCE||b.method===pa.POST)this._detour.args=g.u.obj.deserialize(g.u.obj.serialize(b.args)),
delete b.args;d=b.replaceHistory;delete b.replaceHistory;b=X(b);this._router.navigate(b,{replaceHistory:d})}else b=X(b),this._router.evaluate(b,{container:this});return c.promise()},setTitle:function(a){this._title=a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(c,d){if(c){var d=d||{},e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new T,this._transition.onChangeStart(this.rootElement,e));e&&C(e);var f=this,g=null;
if(d.navigationType===ia.ONCE||d.method===pa.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;e=null;d.method===pa.POST?(e=this._detour.serverArgs,delete this._detour.serverArgs):e=d.serverArgs;w(c)?R.test(c)?p(c,a("<div></div>"),g).done(function(a){f._navigateEnd(a,d)}):ea(c,d.method,e).done(function(c){b(a("<div></div>").append(c),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(a){l(100008,[c],a)}):c.__name&&R.test(c.__name)&&
f._navigateEnd(c,d)}},_navigateEnd:function(b,c){var d=this,e=(this._currentController||{}).rootElement,f=b.rootElement;d._currentController=b;var g=c&&c.title;null==g?this._navigateParam&&R.test(this._navigateParam.to)&&null!=b.sceneTitle?this.setTitle(b.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&a(e).remove();
d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=false;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var b=this._currentController.rootElement,c=a(b).find("[data-title]").data("title");if(null!=c)return c;b=a(b).find("title");if(b.length)return b.text()},_onNotReshowable:function(b){na.__name&&R.test(na.__name)?this._navigateEnd(sa.controllerInternal(a("<div></div>"),na,{_notReshowableMessage:"この画面は再表示できません。"}),b):(b=null,b=w(na)?{to:na}:a.extend(!0,{},na),b.args=
b.args||{},b.args._notReshowableMessage="この画面は再表示できません。",this._navigate(b.to,b))},_defaultFuncForRouter:function(a){var d=this,e=O(a),f=e.to;if(this.isMain&&this._first){if(e.navigationType===ia.ONCE||e.method===pa.POST){this._onNotReshowable(e);this._first=!1;return}var g=f&&R.test(f),h=Ha===c&&location.hash.substring(1);if(this._router.compareUrl(a)&&!h&&!g){b(this.rootElement,null,e.args).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,a.rootElement);d._transition=
null;a=d._getTitleFromCurrentScene();null!=a&&d.setTitle(a)});this._first=!1;return}}f=f||location.pathname+location.search;f=U(f);this._first&&(this._navigated=!0);this._navigate(f,e);this._first=!1}};sa.addControllerInstantiationHook(function(a){a.scene=new D(a)});a(function(){Na=g.settings.scene.clientQueryStringPrefix;Ta=Na.replace(/\\/g,"\\\\");Oa=g.settings.scene.clientFWQueryStringPrefix;Pa=Oa.replace(/\\/g,"\\\\");ya=g.settings.scene.urlHistoryMode;Y=parseInt(g.settings.scene.urlMaxLength);
na=db;Ia=g.settings.scene.baseUrl;var b=[];g.settings.scene.routes&&(b=b.concat(g.settings.scene.routes));b=a.map(b,function(a){var b=a.test;if(G(b))var c=b,b=function(a){var b=O(a);return c(a,b)};return{test:b,func:function(b,c){var c=c||{},d=a.navigationInfo;if(G(d))var e=O(b),d=d(b,e);if(null==d)return(c.container||la)._defaultFuncForRouter(b),null;w(d)&&(d={to:d});return X(d)}}});b.push({test:/.*/,func:function(a,b){b=b||{};(b.container||la)._defaultFuncForRouter(a)}});Ja=new E({routes:b,urlHistoryMode:ya,
baseUrl:Ia,urlMaxLength:Y});g.settings.scene.autoInit&&ga()});g.u.obj.expose("h5.scene",{openWindow:function(a,b,c,d){var e=g.async.deferred(),f=new Z(a,b,c,d);setTimeout(function(){e.resolve(f)},100);return e.promise()},createSceneContainer:fa,init:ga,getMainSceneContainer:function(){return la},getSceneContainers:S,getSceneContainerByName:function(a){if(null==a)return null;var b=S();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},
navigationType:ia,method:pa,urlHistoryMode:Q})})()})(jQuery);